{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/hooks/useTodayProfit.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { useBusiness } from '@/contexts/BusinessContext'\r\nimport { format } from 'date-fns'\r\n\r\ninterface TodayProfit {\r\n  profit: number\r\n  revenue: number\r\n  expenses: number\r\n}\r\n\r\nexport function useTodayProfit() {\r\n  const { currentBusiness } = useBusiness()\r\n  const today = format(new Date(), 'yyyy-MM-dd')\r\n  \r\n  return useQuery<TodayProfit>({\r\n    queryKey: ['todayProfit', currentBusiness?.id, today],\r\n    queryFn: async () => {\r\n      if (!currentBusiness?.id) {\r\n        return { profit: 0, revenue: 0, expenses: 0 }\r\n      }\r\n      \r\n      console.log(`[useTodayProfit] Fetching today's transactions for business: ${currentBusiness.id}, date: ${today}`)\r\n      \r\n      const { data, error } = await supabase\r\n        .from('transactions')\r\n        .select('transaction_type, amount')\r\n        .eq('business_id', currentBusiness.id)\r\n        .eq('transaction_date', today)\r\n      \r\n      if (error) {\r\n        console.error('[useTodayProfit] Error fetching transactions:', {\r\n          code: error.code,\r\n          message: error.message,\r\n          details: error.details,\r\n        })\r\n        throw error\r\n      }\r\n      \r\n      const revenue = data?.filter(t => t.transaction_type === 'sale' || t.transaction_type === 'payment_received')\r\n        .reduce((sum, t) => sum + t.amount, 0) || 0\r\n      const expenses = data?.filter(t => t.transaction_type === 'expense' || t.transaction_type === 'payment_made')\r\n        .reduce((sum, t) => sum + t.amount, 0) || 0\r\n      \r\n      const profit = revenue - expenses\r\n      console.log(`[useTodayProfit] Today's summary: revenue=${revenue}, expenses=${expenses}, profit=${profit}`)\r\n      \r\n      return { profit, revenue, expenses }\r\n    },\r\n    enabled: !!currentBusiness?.id\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAQO,SAAS;;IACd,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,qJAAW;IACvC,MAAM,QAAQ,IAAA,mKAAM,EAAC,IAAI,QAAQ;IAEjC,OAAO,IAAA,0LAAQ,EAAc;QAC3B,UAAU;YAAC;YAAe,iBAAiB;YAAI;SAAM;QACrD,OAAO;uCAAE;gBACP,IAAI,CAAC,iBAAiB,IAAI;oBACxB,OAAO;wBAAE,QAAQ;wBAAG,SAAS;wBAAG,UAAU;oBAAE;gBAC9C;gBAEA,QAAQ,GAAG,CAAC,CAAC,6DAA6D,EAAE,gBAAgB,EAAE,CAAC,QAAQ,EAAE,OAAO;gBAEhH,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uJAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,4BACP,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,EAAE,CAAC,oBAAoB;gBAE1B,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,iDAAiD;wBAC7D,MAAM,MAAM,IAAI;wBAChB,SAAS,MAAM,OAAO;wBACtB,SAAS,MAAM,OAAO;oBACxB;oBACA,MAAM;gBACR;gBAEA,MAAM,UAAU,MAAM;+CAAO,CAAA,IAAK,EAAE,gBAAgB,KAAK,UAAU,EAAE,gBAAgB,KAAK;8CACvF;+CAAO,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;8CAAE,MAAM;gBAC5C,MAAM,WAAW,MAAM;+CAAO,CAAA,IAAK,EAAE,gBAAgB,KAAK,aAAa,EAAE,gBAAgB,KAAK;8CAC3F;+CAAO,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;8CAAE,MAAM;gBAE5C,MAAM,SAAS,UAAU;gBACzB,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,QAAQ,WAAW,EAAE,SAAS,SAAS,EAAE,QAAQ;gBAE1G,OAAO;oBAAE;oBAAQ;oBAAS;gBAAS;YACrC;;QACA,SAAS,CAAC,CAAC,iBAAiB;IAC9B;AACF;GAxCgB;;QACc,qJAAW;QAGhC,0LAAQ"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/hooks/useTransactions.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { useBusiness } from '@/contexts/BusinessContext'\r\nimport { Transaction } from '@/types'\r\n\r\nexport function useTransactions() {\r\n  const { currentBusiness } = useBusiness()\r\n  \r\n  return useQuery<Transaction[]>({\r\n    queryKey: ['transactions', currentBusiness?.id],\r\n    queryFn: async () => {\r\n      if (!currentBusiness?.id) {\r\n        console.log('[useTransactions] No business ID, returning empty array')\r\n        return []\r\n      }\r\n      \r\n      console.log(`[useTransactions] Fetching transactions for business: ${currentBusiness.id}`)\r\n      \r\n      // First, let's test if we can query transactions at all (without filter)\r\n      const { data: allData, error: allError } = await supabase\r\n        .from('transactions')\r\n        .select('id, business_id, transaction_type, amount, transaction_date')\r\n        .limit(10)\r\n      \r\n      console.log('[useTransactions] Test query (all transactions, limit 10):', {\r\n        count: allData?.length || 0,\r\n        data: allData,\r\n        error: allError ? {\r\n          code: allError.code,\r\n          message: allError.message,\r\n          details: allError.details,\r\n          hint: allError.hint,\r\n        } : null,\r\n      })\r\n      \r\n      if (allData && allData.length > 0) {\r\n        console.log('[useTransactions] Business IDs found in transactions:', \r\n          [...new Set(allData.map(t => t.business_id))]\r\n        )\r\n        console.log('[useTransactions] Current business ID:', currentBusiness.id)\r\n        console.log('[useTransactions] Match?', allData.some(t => t.business_id === currentBusiness.id))\r\n      }\r\n      \r\n      // Now query with business_id filter\r\n      // Note: deleted_at column might not exist yet, so we'll filter in JavaScript\r\n      const { data, error } = await supabase\r\n        .from('transactions')\r\n        .select('*')\r\n        .eq('business_id', currentBusiness.id)\r\n        .order('transaction_date', { ascending: false })\r\n      \r\n      // Filter out soft-deleted transactions in JavaScript (if deleted_at column exists)\r\n      const activeData = data?.filter(t => !t.deleted_at) || data || []\r\n      \r\n      console.log('[useTransactions] Filtered query result:', {\r\n        business_id_filter: currentBusiness.id,\r\n        count: data?.length || 0,\r\n        error: error ? {\r\n          code: error.code,\r\n          message: error.message,\r\n        } : null,\r\n      })\r\n      \r\n      if (error) {\r\n        console.error('[useTransactions] Error fetching transactions:', {\r\n          code: error.code,\r\n          message: error.message,\r\n          details: error.details,\r\n          hint: error.hint,\r\n        })\r\n        throw error\r\n      }\r\n      \r\n      // Sort by transaction_date (desc), then by created_at (desc) for same dates\r\n      const sortedData = activeData.sort((a, b) => {\r\n        const dateA = new Date(a.transaction_date).getTime()\r\n        const dateB = new Date(b.transaction_date).getTime()\r\n        if (dateA !== dateB) {\r\n          return dateB - dateA // Descending by date\r\n        }\r\n        // If same date, sort by created_at\r\n        const createdA = new Date(a.created_at).getTime()\r\n        const createdB = new Date(b.created_at).getTime()\r\n        return createdB - createdA // Descending by created_at\r\n      })\r\n      \r\n      console.log(`[useTransactions] Successfully loaded ${sortedData.length} transactions`)\r\n      if (sortedData.length > 0) {\r\n        console.log('[useTransactions] Sample transaction:', {\r\n          id: sortedData[0].id,\r\n          type: sortedData[0].transaction_type,\r\n          amount: sortedData[0].amount,\r\n          date: sortedData[0].transaction_date,\r\n          created_at: sortedData[0].created_at,\r\n        })\r\n      }\r\n      \r\n      return sortedData\r\n    },\r\n    enabled: !!currentBusiness?.id,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnMount: true,\r\n  })\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/SummaryCard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ArrowUp, ArrowDown } from 'lucide-react'\r\n\r\ninterface SummaryCardProps {\r\n  label: string\r\n  value: number | string\r\n  trend?: 'up' | 'down'\r\n  subtitle?: string\r\n}\r\n\r\nexport function SummaryCard({ label, value, trend, subtitle }: SummaryCardProps) {\r\n  return (\r\n    <div className=\"bg-tally-surface rounded-[var(--tally-radius)] p-4 shadow-[var(--tally-shadow)]\">\r\n      <p className=\"text-sm text-tally-text-muted mb-1 font-medium\">{label}</p>\r\n      <div className=\"flex items-center gap-2\">\r\n        <p className=\"text-2xl font-bold tabular-nums text-tally-text\">\r\n          {typeof value === 'number' ? `RM ${value.toLocaleString('ms-MY', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : value}\r\n        </p>\r\n        {trend && (\r\n          <div className={trend === 'up' ? 'text-money-in' : 'text-money-out'}>\r\n            {trend === 'up' ? (\r\n              <ArrowUp className=\"w-5 h-5\" />\r\n            ) : (\r\n              <ArrowDown className=\"w-5 h-5\" />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {subtitle && (\r\n        <p className=\"text-xs text-text-muted mt-1\">{subtitle}</p>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAWO,SAAS,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAoB;IAC7E,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;0BAAkD;;;;;;0BAC/D,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCACV,OAAO,UAAU,WAAW,CAAC,GAAG,EAAE,MAAM,cAAc,CAAC,SAAS;4BAAE,uBAAuB;4BAAG,uBAAuB;wBAAE,IAAI,GAAG;;;;;;oBAE9H,uBACC,6LAAC;wBAAI,WAAW,UAAU,OAAO,kBAAkB;kCAChD,UAAU,qBACT,6LAAC,0NAAO;4BAAC,WAAU;;;;;iDAEnB,6LAAC,gOAAS;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAK5B,0BACC,6LAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;;AAIrD;KAvBgB"}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatCurrency(amount: number, direction?: 'in' | 'out'): string {\r\n  const formatted = new Intl.NumberFormat('ms-MY', {\r\n    style: 'currency',\r\n    currency: 'MYR',\r\n    minimumFractionDigits: 2\r\n  }).format(amount).replace('MYR', 'RM')\r\n  \r\n  if (direction === 'in') {\r\n    return `+ ${formatted}`\r\n  } else if (direction === 'out') {\r\n    return `â€“ ${formatted}`\r\n  }\r\n  \r\n  return formatted\r\n}\r\n\r\nexport function formatDate(date: Date | string): string {\r\n  return new Date(date).toLocaleDateString('ms-MY', {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    year: 'numeric'\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS,eAAe,MAAc,EAAE,SAAwB;IACrE,MAAM,YAAY,IAAI,KAAK,YAAY,CAAC,SAAS;QAC/C,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC,QAAQ,OAAO,CAAC,OAAO;IAEjC,IAAI,cAAc,MAAM;QACtB,OAAO,CAAC,EAAE,EAAE,WAAW;IACzB,OAAO,IAAI,cAAc,OAAO;QAC9B,OAAO,CAAC,EAAE,EAAE,WAAW;IACzB;IAEA,OAAO;AACT;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,KAAK;QACL,OAAO;QACP,MAAM;IACR;AACF"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/ui/dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from \"react\"\r\nimport { X } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface DialogProps {\r\n  open?: boolean\r\n  onOpenChange?: (open: boolean) => void\r\n  children: React.ReactNode\r\n}\r\n\r\ninterface DialogContextValue {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n}\r\n\r\nconst DialogContext = React.createContext<DialogContextValue | undefined>(undefined)\r\n\r\nexport function Dialog({ open, onOpenChange, children }: DialogProps) {\r\n  return (\r\n    <DialogContext.Provider value={{ open: open ?? false, onOpenChange: onOpenChange ?? (() => {}) }}>\r\n      {open && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n          <div \r\n            className=\"fixed inset-0 bg-black/50\"\r\n            onClick={() => onOpenChange?.(false)}\r\n          />\r\n          <div className=\"relative z-50 w-full max-w-md mx-4\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </DialogContext.Provider>\r\n  )\r\n}\r\n\r\nexport function DialogTrigger({ \r\n  asChild, \r\n  children, \r\n  ...props \r\n}: { asChild?: boolean; children: React.ReactNode } & React.ButtonHTMLAttributes<HTMLButtonElement>) {\r\n  const context = React.useContext(DialogContext)\r\n  if (!context) throw new Error(\"DialogTrigger must be used within Dialog\")\r\n  \r\n  if (asChild && React.isValidElement(children)) {\r\n    return React.cloneElement(children, {\r\n      ...props,\r\n      onClick: () => context.onOpenChange(true),\r\n    } as React.ButtonHTMLAttributes<HTMLButtonElement>)\r\n  }\r\n  \r\n  return (\r\n    <button {...props} onClick={() => context.onOpenChange(true)}>\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n\r\nexport function DialogContent({ \r\n  className, \r\n  children \r\n}: { className?: string; children: React.ReactNode }) {\r\n  const context = React.useContext(DialogContext)\r\n  if (!context) throw new Error(\"DialogContent must be used within Dialog\")\r\n  \r\n  return (\r\n    <div className={cn(\r\n      \"bg-white rounded-lg shadow-lg p-6 max-h-[90vh] overflow-y-auto\",\r\n      className\r\n    )}>\r\n      <button\r\n        onClick={() => context.onOpenChange(false)}\r\n        className=\"absolute top-4 right-4 rounded-sm opacity-70 hover:opacity-100\"\r\n      >\r\n        <X className=\"h-4 w-4\" />\r\n      </button>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DialogHeader({ className, children }: { className?: string; children: React.ReactNode }) {\r\n  return (\r\n    <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left mb-4\", className)}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DialogTitle({ className, children }: { className?: string; children: React.ReactNode }) {\r\n  return (\r\n    <h2 className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}>\r\n      {children}\r\n    </h2>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBA,MAAM,8BAAgB,8KAAmB,CAAiC;AAEnE,SAAS,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAe;IAClE,qBACE,6LAAC,cAAc,QAAQ;QAAC,OAAO;YAAE,MAAM,QAAQ;YAAO,cAAc,gBAAgB,CAAC,KAAO,CAAC;QAAE;kBAC5F,sBACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAU;oBACV,SAAS,IAAM,eAAe;;;;;;8BAEhC,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAMb;KAhBgB;AAkBT,SAAS,cAAc,EAC5B,OAAO,EACP,QAAQ,EACR,GAAG,OAC8F;;IACjG,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAE9B,IAAI,yBAAW,+KAAoB,CAAC,WAAW;QAC7C,qBAAO,6KAAkB,CAAC,UAAU;YAClC,GAAG,KAAK;YACR,SAAS,IAAM,QAAQ,YAAY,CAAC;QACtC;IACF;IAEA,qBACE,6LAAC;QAAQ,GAAG,KAAK;QAAE,SAAS,IAAM,QAAQ,YAAY,CAAC;kBACpD;;;;;;AAGP;GApBgB;MAAA;AAsBT,SAAS,cAAc,EAC5B,SAAS,EACT,QAAQ,EAC0C;;IAClD,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAE9B,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAChB,kEACA;;0BAEA,6LAAC;gBACC,SAAS,IAAM,QAAQ,YAAY,CAAC;gBACpC,WAAU;0BAEV,cAAA,6LAAC,oMAAC;oBAAC,WAAU;;;;;;;;;;;YAEd;;;;;;;AAGP;IArBgB;MAAA;AAuBT,SAAS,aAAa,EAAE,SAAS,EAAE,QAAQ,EAAqD;IACrG,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,2DAA2D;kBAC3E;;;;;;AAGP;MANgB;AAQT,SAAS,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAqD;IACpG,qBACE,6LAAC;QAAG,WAAW,IAAA,4HAAE,EAAC,qDAAqD;kBACpE;;;;;;AAGP;MANgB"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: \"default\" | \"outline\" | \"ghost\"\r\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\"\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant = \"default\", size = \"default\", ...props }, ref) => {\r\n    return (\r\n      <button\r\n        className={cn(\r\n          \"inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n          variant === \"default\" && \"bg-tally-sale text-white hover:bg-tally-sale-hover rounded-[var(--tally-radius)]\",\r\n          variant === \"outline\" && \"border-2 border-tally-border bg-tally-surface text-tally-text hover:bg-tally-surface-2 rounded-[var(--tally-radius)]\",\r\n          variant === \"ghost\" && \"hover:bg-tally-surface-2 rounded-[var(--tally-radius)]\",\r\n          size === \"default\" && \"h-10 px-4 py-2\",\r\n          size === \"sm\" && \"h-8 px-3 text-sm\",\r\n          size === \"lg\" && \"h-12 px-6 text-lg\",\r\n          size === \"icon\" && \"h-10 w-10\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQA,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG,OAAO,EAAE;IAC/D,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iNACA,YAAY,aAAa,oFACzB,YAAY,aAAa,wHACzB,YAAY,WAAW,0DACvB,SAAS,aAAa,kBACtB,SAAS,QAAQ,oBACjB,SAAS,QAAQ,qBACjB,SAAS,UAAU,aACnB;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AmountInput.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { InputHTMLAttributes } from 'react'\r\n\r\ninterface AmountInputProps extends Omit<InputHTMLAttributes<HTMLInputElement>, 'value' | 'onChange'> {\r\n  value: string\r\n  onChange: (value: string) => void\r\n}\r\n\r\nexport function AmountInput({ value, onChange, autoFocus, ...props }: AmountInputProps) {\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const input = e.target.value\r\n    // Only allow numbers and one decimal point\r\n    const sanitized = input.replace(/[^0-9.]/g, '')\r\n    // Ensure only one decimal point\r\n    const parts = sanitized.split('.')\r\n    const formatted = parts.length > 2 \r\n      ? parts[0] + '.' + parts.slice(1).join('')\r\n      : sanitized\r\n    onChange(formatted)\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center gap-2\">\r\n      <span className=\"text-6xl font-bold text-text-primary\">RM</span>\r\n      <input\r\n        type=\"text\"\r\n        inputMode=\"decimal\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        autoFocus={autoFocus}\r\n        className=\"text-6xl font-bold tabular-nums text-text-primary bg-transparent border-none outline-none w-full text-center\"\r\n        placeholder=\"0.00\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AASO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAyB;IACpF,MAAM,eAAe,CAAC;QACpB,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,2CAA2C;QAC3C,MAAM,YAAY,MAAM,OAAO,CAAC,YAAY;QAC5C,gCAAgC;QAChC,MAAM,QAAQ,UAAU,KAAK,CAAC;QAC9B,MAAM,YAAY,MAAM,MAAM,GAAG,IAC7B,KAAK,CAAC,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MACrC;QACJ,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAK,WAAU;0BAAuC;;;;;;0BACvD,6LAAC;gBACC,MAAK;gBACL,WAAU;gBACV,OAAO;gBACP,UAAU;gBACV,WAAW;gBACX,WAAU;gBACV,aAAY;gBACX,GAAG,KAAK;;;;;;;;;;;;AAIjB;KA5BgB"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/PaymentTypeSelector.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Wallet, Building2, Smartphone, CreditCard } from 'lucide-react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ntype PaymentType = 'cash' | 'bank_transfer' | 'duitnow' | 'tng' | 'boost' | 'grabpay' | 'shopeepay' | 'credit'\r\n\r\ninterface PaymentTypeSelectorProps {\r\n  value: string\r\n  onChange: (value: PaymentType) => void\r\n  variant?: 'sale' | 'expense'\r\n}\r\n\r\nexport function PaymentTypeSelector({ value, onChange, variant = 'sale' }: PaymentTypeSelectorProps) {\r\n  const { t } = useTranslation()\r\n  \r\n  const paymentTypes: Array<{ value: PaymentType; label: string; icon: typeof Wallet }> = [\r\n    { value: 'cash', label: t('paymentTypes.cash'), icon: Wallet },\r\n    { value: 'bank_transfer', label: t('paymentTypes.bank_transfer'), icon: Building2 },\r\n    { value: 'duitnow', label: t('paymentTypes.duitnow'), icon: Smartphone },\r\n    { value: 'tng', label: t('paymentTypes.tng'), icon: Smartphone },\r\n    { value: 'boost', label: t('paymentTypes.boost'), icon: Smartphone },\r\n    { value: 'grabpay', label: t('paymentTypes.grabpay'), icon: Smartphone },\r\n    { value: 'shopeepay', label: t('paymentTypes.shopeepay'), icon: Smartphone },\r\n    { value: 'credit', label: t('paymentTypes.credit'), icon: CreditCard },\r\n  ]\r\n  return (\r\n    <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\r\n      {paymentTypes.map((type) => {\r\n        const Icon = type.icon\r\n        const isSelected = value === type.value\r\n        const selectedColor = variant === 'sale' ? '#29978C' : '#EA6C3C'\r\n        const selectedBg = variant === 'sale' ? 'rgba(41,151,140,0.12)' : 'rgba(234,108,60,0.12)'\r\n        return (\r\n          <button\r\n            key={type.value}\r\n            onClick={() => onChange(type.value)}\r\n            className={`flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap transition-all duration-150 ${\r\n              isSelected\r\n                ? 'shadow-[var(--tally-shadow)] hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2'\r\n                : 'bg-[var(--tally-surface)] border-2 border-[var(--tally-border)] text-[var(--tally-text)] shadow-sm hover:shadow-md hover:border-[var(--tally-text-muted)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(41,151,140,0.25)] focus-visible:ring-offset-2'\r\n            } active:scale-[0.98]`}\r\n            style={isSelected ? {\r\n              backgroundColor: selectedBg,\r\n              borderColor: selectedColor,\r\n              color: selectedColor,\r\n              borderWidth: '2px',\r\n            } : undefined}\r\n          >\r\n            <Icon \r\n              className=\"w-4 h-4\" \r\n              style={isSelected ? { color: selectedColor } : { color: 'var(--tally-text-muted)' }}\r\n            />\r\n            <span className=\"text-sm font-medium\">{type.label}</span>\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;;;AAHA;;;AAaO,SAAS,oBAAoB,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,MAAM,EAA4B;;IACjG,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAE5B,MAAM,eAAkF;QACtF;YAAE,OAAO;YAAQ,OAAO,EAAE;YAAsB,MAAM,mNAAM;QAAC;QAC7D;YAAE,OAAO;YAAiB,OAAO,EAAE;YAA+B,MAAM,gOAAS;QAAC;QAClF;YAAE,OAAO;YAAW,OAAO,EAAE;YAAyB,MAAM,+NAAU;QAAC;QACvE;YAAE,OAAO;YAAO,OAAO,EAAE;YAAqB,MAAM,+NAAU;QAAC;QAC/D;YAAE,OAAO;YAAS,OAAO,EAAE;YAAuB,MAAM,+NAAU;QAAC;QACnE;YAAE,OAAO;YAAW,OAAO,EAAE;YAAyB,MAAM,+NAAU;QAAC;QACvE;YAAE,OAAO;YAAa,OAAO,EAAE;YAA2B,MAAM,+NAAU;QAAC;QAC3E;YAAE,OAAO;YAAU,OAAO,EAAE;YAAwB,MAAM,mOAAU;QAAC;KACtE;IACD,qBACE,6LAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC;YACjB,MAAM,OAAO,KAAK,IAAI;YACtB,MAAM,aAAa,UAAU,KAAK,KAAK;YACvC,MAAM,gBAAgB,YAAY,SAAS,YAAY;YACvD,MAAM,aAAa,YAAY,SAAS,0BAA0B;YAClE,qBACE,6LAAC;gBAEC,SAAS,IAAM,SAAS,KAAK,KAAK;gBAClC,WAAW,CAAC,6FAA6F,EACvG,aACI,6HACA,mRACL,oBAAoB,CAAC;gBACtB,OAAO,aAAa;oBAClB,iBAAiB;oBACjB,aAAa;oBACb,OAAO;oBACP,aAAa;gBACf,IAAI;;kCAEJ,6LAAC;wBACC,WAAU;wBACV,OAAO,aAAa;4BAAE,OAAO;wBAAc,IAAI;4BAAE,OAAO;wBAA0B;;;;;;kCAEpF,6LAAC;wBAAK,WAAU;kCAAuB,KAAK,KAAK;;;;;;;eAlB5C,KAAK,KAAK;;;;;QAqBrB;;;;;;AAGN;GA9CgB;;QACA,qLAAc;;;KADd"}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/TransactionList.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Transaction } from '@/types'\r\nimport { formatCurrency, formatDate } from '@/lib/utils'\r\nimport { Wallet, Building2, Smartphone, CreditCard, Edit, Trash2 } from 'lucide-react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useState } from 'react'\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { toast } from 'sonner'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { AmountInput } from '@/components/AmountInput'\r\nimport { PaymentTypeSelector } from '@/components/PaymentTypeSelector'\r\n\r\nconst paymentIcons: Record<string, typeof Wallet> = {\r\n  cash: Wallet,\r\n  bank_transfer: Building2,\r\n  duitnow: Smartphone,\r\n  tng: Smartphone,\r\n  boost: Smartphone,\r\n  grabpay: Smartphone,\r\n  shopeepay: Smartphone,\r\n  credit: CreditCard,\r\n}\r\n\r\n// paymentLabels removed - will use translations\r\n\r\ninterface TransactionListProps {\r\n  transactions: Transaction[]\r\n  limit?: number\r\n}\r\n\r\nexport function TransactionList({ transactions, limit }: TransactionListProps) {\r\n  const { t } = useTranslation()\r\n  const router = useRouter()\r\n  const queryClient = useQueryClient()\r\n  const [editingTransaction, setEditingTransaction] = useState<Transaction | null>(null)\r\n  const [editAmount, setEditAmount] = useState('')\r\n  const [editPaymentType, setEditPaymentType] = useState<string>('cash')\r\n  const [editNotes, setEditNotes] = useState('')\r\n  const [deletingTransaction, setDeletingTransaction] = useState<Transaction | null>(null)\r\n  const [deletedTransaction, setDeletedTransaction] = useState<Transaction | null>(null)\r\n\r\n  // Hooks must be called before any early returns\r\n  const updateMutation = useMutation({\r\n    mutationFn: async () => {\r\n      if (!editingTransaction) return\r\n      \r\n      const amountNum = parseFloat(editAmount)\r\n      if (isNaN(amountNum) || amountNum <= 0) {\r\n        throw new Error(t('transaction.invalidAmount'))\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('transactions')\r\n        .update({\r\n          amount: amountNum,\r\n          payment_type: editPaymentType,\r\n          notes: editNotes || null,\r\n        })\r\n        .eq('id', editingTransaction.id)\r\n\r\n      if (error) throw error\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['transactions'] })\r\n      queryClient.invalidateQueries({ queryKey: ['todayProfit'] })\r\n      toast.success(t('transaction.updated'))\r\n      setEditingTransaction(null)\r\n    },\r\n    onError: () => {\r\n      toast.error(t('common.couldntSave'))\r\n    },\r\n  })\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async () => {\r\n      if (!deletingTransaction) return\r\n      \r\n      setDeletedTransaction(deletingTransaction)\r\n\r\n      // Soft delete: add deleted_at timestamp\r\n      const { error } = await supabase\r\n        .from('transactions')\r\n        .update({ deleted_at: new Date().toISOString() })\r\n        .eq('id', deletingTransaction.id)\r\n\r\n      if (error) throw error\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['transactions'] })\r\n      queryClient.invalidateQueries({ queryKey: ['todayProfit'] })\r\n      toast.success(t('transaction.deleted'), {\r\n        action: {\r\n          label: t('transaction.undo'),\r\n          onClick: handleUndo,\r\n        },\r\n        duration: 30000,\r\n      })\r\n      setDeletingTransaction(null)\r\n    },\r\n    onError: () => {\r\n      toast.error(t('common.couldntDelete'))\r\n    },\r\n  })\r\n\r\n  const handleUndo = async () => {\r\n    if (!deletedTransaction) return\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('transactions')\r\n        .update({ deleted_at: null })\r\n        .eq('id', deletedTransaction.id)\r\n\r\n      if (error) throw error\r\n\r\n      queryClient.invalidateQueries({ queryKey: ['transactions'] })\r\n      queryClient.invalidateQueries({ queryKey: ['todayProfit'] })\r\n      toast.success(t('transaction.updated'))\r\n      setDeletedTransaction(null)\r\n    } catch (err) {\r\n      toast.error(t('common.couldntSave'))\r\n    }\r\n  }\r\n\r\n  const handleEditClick = (transaction: Transaction, e: React.MouseEvent) => {\r\n    e.stopPropagation()\r\n    setEditingTransaction(transaction)\r\n    setEditAmount(transaction.amount.toString())\r\n    setEditPaymentType(transaction.payment_type)\r\n    setEditNotes(transaction.notes || '')\r\n  }\r\n\r\n  const handleDeleteClick = (transaction: Transaction, e: React.MouseEvent) => {\r\n    e.stopPropagation()\r\n    setDeletingTransaction(transaction)\r\n  }\r\n\r\n  // Debug logging\r\n  console.log('[TransactionList] Received transactions:', {\r\n    count: transactions?.length || 0,\r\n    limit,\r\n    transactions: transactions?.slice(0, 3).map(t => ({\r\n      id: t.id,\r\n      type: t.transaction_type,\r\n      amount: t.amount,\r\n      date: t.transaction_date,\r\n    })),\r\n  })\r\n\r\n  // Early returns for empty states\r\n  if (!transactions || transactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12 text-gray-500\">\r\n        <p>{t('home.noTransactions')}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Filter out soft-deleted transactions (if deleted_at column exists)\r\n  const activeTransactions = transactions.filter(t => !t.deleted_at || t.deleted_at === null)\r\n  const displayTransactions = limit ? activeTransactions.slice(0, limit) : activeTransactions\r\n\r\n  if (displayTransactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12 text-gray-500\">\r\n        <p>{t('home.noTransactions')}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"space-y-3\">\r\n        {displayTransactions.map((transaction) => {\r\n          const isSale = transaction.transaction_type === 'sale' || transaction.transaction_type === 'payment_received'\r\n          const Icon = paymentIcons[transaction.payment_type] || Wallet\r\n          const paymentLabel = t(`paymentTypes.${transaction.payment_type}`) || transaction.payment_type\r\n\r\n          return (\r\n            <div\r\n              key={transaction.id}\r\n              className=\"w-full bg-surface rounded-lg p-4 border border-divider hover:border-icon-default transition-colors\"\r\n            >\r\n              <div className=\"flex items-start justify-between gap-3\">\r\n                <button\r\n                  onClick={() => router.push(`/transaction/${transaction.id}`)}\r\n                  className=\"flex-1 text-left\"\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-1\">\r\n                    <Icon className=\"w-4 h-4 text-icon-default\" />\r\n                    <span className=\"text-sm text-text-secondary\">{paymentLabel}</span>\r\n                    {transaction.expense_category && (\r\n                      <span className=\"text-xs text-text-muted bg-surface-secondary px-2 py-0.5 rounded\">\r\n                        {transaction.expense_category}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-text-muted mb-1\">\r\n                    {formatDate(transaction.transaction_date)}\r\n                  </p>\r\n                  {transaction.notes && (\r\n                    <p className=\"text-sm text-text-primary mt-1\">{transaction.notes}</p>\r\n                  )}\r\n                </button>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className={`text-lg font-bold tabular-nums ${\r\n                    isSale ? 'text-green-600' : 'text-red-600'\r\n                  }`}>\r\n                    {isSale ? '+' : '-'}{formatCurrency(transaction.amount)}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <button\r\n                      onClick={(e) => handleEditClick(transaction, e)}\r\n                      className=\"p-1.5 hover:bg-surface-secondary rounded transition-colors\"\r\n                      title=\"Edit\"\r\n                    >\r\n                      <Edit className=\"w-4 h-4 text-icon-default\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={(e) => handleDeleteClick(transaction, e)}\r\n                      className=\"p-1.5 hover:bg-surface-secondary rounded transition-colors\"\r\n                      title=\"Padam\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4 text-icon-default\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Edit Dialog */}\r\n      <Dialog open={!!editingTransaction} onOpenChange={(open) => !open && setEditingTransaction(null)}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t('transaction.edit')}</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-6 pt-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">{t('transaction.amount')}</label>\r\n              <AmountInput\r\n                value={editAmount}\r\n                onChange={setEditAmount}\r\n                autoFocus\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">{t('transaction.paymentType')}</label>\r\n              <PaymentTypeSelector\r\n                value={editPaymentType}\r\n                onChange={(value) => setEditPaymentType(value)}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">{t('transaction.notes')} ({t('common.optional')})</label>\r\n              <textarea\r\n                value={editNotes}\r\n                onChange={(e) => setEditNotes(e.target.value)}\r\n                className=\"w-full p-3 border border-divider rounded-lg bg-surface\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setEditingTransaction(null)}\r\n                className=\"flex-1\"\r\n              >\r\n                {t('common.cancel')}\r\n              </Button>\r\n              <Button\r\n                onClick={() => updateMutation.mutate()}\r\n                disabled={updateMutation.isPending || !editAmount}\r\n                className=\"flex-1 bg-cta-primary hover:bg-cta-hover text-cta-text\"\r\n              >\r\n                {updateMutation.isPending ? t('transaction.saving') : t('common.save')}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation */}\r\n      <Dialog open={!!deletingTransaction} onOpenChange={(open) => !open && setDeletingTransaction(null)}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t('transaction.delete')}</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"pt-4 space-y-4\">\r\n            <p className=\"text-text-primary\">\r\n              {t('transaction.deleteConfirm')} {t('transaction.deleteConfirmDesc')}\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setDeletingTransaction(null)}\r\n                className=\"flex-1\"\r\n              >\r\n                {t('common.cancel')}\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setDeletingTransaction(null)\r\n                  deleteMutation.mutate()\r\n                }}\r\n                disabled={deleteMutation.isPending}\r\n                className=\"flex-1 bg-money-out hover:bg-money-out/90 text-white\"\r\n              >\r\n                {deleteMutation.isPending ? t('common.loading') : t('common.delete')}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1321, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/BottomNav.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Home, Clock, FileText, Settings } from 'lucide-react'\r\n\r\nconst NAV_HEIGHT = 88\r\n\r\nexport function BottomNav() {\r\n  const { t } = useTranslation()\r\n  const pathname = usePathname()\r\n  \r\n  const navItems = [\r\n    { href: '/', label: t('home.title'), icon: Home },\r\n    { href: '/history', label: t('history.title'), icon: Clock },\r\n    { href: '/summary', label: t('summary.title'), icon: FileText },\r\n    { href: '/settings', label: t('settings.title'), icon: Settings },\r\n  ]\r\n\r\n  return (\r\n    <nav \r\n      className=\"fixed bottom-0 left-0 right-0 bg-tally-surface border-t border-tally-border z-50\"\r\n      style={{\r\n        paddingBottom: 'env(safe-area-inset-bottom)',\r\n        minHeight: `${NAV_HEIGHT}px`,\r\n        height: `${NAV_HEIGHT}px`\r\n      }}\r\n    >\r\n      <div className=\"max-w-md mx-auto grid grid-cols-4 h-full\">\r\n        {navItems.map((item) => {\r\n          const Icon = item.icon\r\n          const isActive = pathname === item.href\r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className={`flex flex-col items-center justify-center transition-colors flex-1 min-w-0 ${\r\n                isActive ? 'text-tally-sale' : 'text-tally-text-muted'\r\n              }`}\r\n            >\r\n              <Icon className=\"w-6 h-6\" />\r\n              <span className=\"text-[11px] mt-1 whitespace-nowrap\">{item.label}</span>\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;;;AALA;;;;;AAOA,MAAM,aAAa;AAEZ,SAAS;;IACd,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,WAAW,IAAA,oJAAW;IAE5B,MAAM,WAAW;QACf;YAAE,MAAM;YAAK,OAAO,EAAE;YAAe,MAAM,8MAAI;QAAC;QAChD;YAAE,MAAM;YAAY,OAAO,EAAE;YAAkB,MAAM,gNAAK;QAAC;QAC3D;YAAE,MAAM;YAAY,OAAO,EAAE;YAAkB,MAAM,6NAAQ;QAAC;QAC9D;YAAE,MAAM;YAAa,OAAO,EAAE;YAAmB,MAAM,yNAAQ;QAAC;KACjE;IAED,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YACL,eAAe;YACf,WAAW,GAAG,WAAW,EAAE,CAAC;YAC5B,QAAQ,GAAG,WAAW,EAAE,CAAC;QAC3B;kBAEA,cAAA,6LAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,OAAO,KAAK,IAAI;gBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;gBACvC,qBACE,6LAAC,0KAAI;oBAEH,MAAM,KAAK,IAAI;oBACf,WAAW,CAAC,2EAA2E,EACrF,WAAW,oBAAoB,yBAC/B;;sCAEF,6LAAC;4BAAK,WAAU;;;;;;sCAChB,6LAAC;4BAAK,WAAU;sCAAsC,KAAK,KAAK;;;;;;;mBAP3D,KAAK,IAAI;;;;;YAUpB;;;;;;;;;;;AAIR;GAxCgB;;QACA,qLAAc;QACX,oJAAW;;;KAFd"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/TallyLogo.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Image from 'next/image'\r\nimport { useRouter } from 'next/navigation'\r\nimport tallyLogo from '@/assets/tally-logo.png'\r\n\r\ninterface TallyLogoProps {\r\n  size?: number\r\n  className?: string\r\n}\r\n\r\nexport function TallyLogo({ size = 28, className = '' }: TallyLogoProps) {\r\n  const router = useRouter()\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={() => router.push('/')}\r\n      className={`flex items-center justify-center ${className}`}\r\n      aria-label=\"Go to home\"\r\n    >\r\n      <Image\r\n        src={tallyLogo}\r\n        alt=\"Tally\"\r\n        width={size}\r\n        height={size}\r\n        priority\r\n      />\r\n    </button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;;;;AAHA;;;;AAWO,SAAS,UAAU,EAAE,OAAO,EAAE,EAAE,YAAY,EAAE,EAAkB;;IACrE,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QACC,MAAK;QACL,SAAS,IAAM,OAAO,IAAI,CAAC;QAC3B,WAAW,CAAC,iCAAiC,EAAE,WAAW;QAC1D,cAAW;kBAEX,cAAA,6LAAC,2IAAK;YACJ,KAAK;YACL,KAAI;YACJ,OAAO;YACP,QAAQ;YACR,QAAQ;;;;;;;;;;;AAIhB;GAnBgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 1491, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AppHeader.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport { ArrowLeft } from 'lucide-react'\r\nimport { TallyLogo } from './TallyLogo'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ninterface AppHeaderProps {\r\n  title: string\r\n  showBack?: boolean\r\n  showLogo?: boolean\r\n}\r\n\r\nexport function AppHeader({ title, showBack = true, showLogo = true }: AppHeaderProps) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const isHome = pathname === '/'\r\n\r\n  const handleBack = () => {\r\n    if (window.history.length > 1) {\r\n      router.back()\r\n    } else {\r\n      router.push('/')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-40 bg-surface border-b border-tally-border\">\r\n      <div className=\"max-w-md mx-auto px-4 h-16 flex items-center\">\r\n        {/* Left: Back button or Logo */}\r\n        <div className=\"flex items-center justify-start w-12 flex-shrink-0\">\r\n          {!isHome && showBack ? (\r\n            <button\r\n              onClick={handleBack}\r\n              className=\"flex items-center justify-center w-10 h-10 rounded-lg hover:bg-tally-surface-2 transition-colors\"\r\n              aria-label=\"Go back\"\r\n            >\r\n              <ArrowLeft className=\"w-5 h-5 text-tally-text\" />\r\n            </button>\r\n          ) : showLogo ? (\r\n            <TallyLogo size={28} />\r\n          ) : (\r\n            <div className=\"w-10\" />\r\n          )}\r\n        </div>\r\n\r\n        {/* Center: Title */}\r\n        <div className=\"flex-1 min-w-0 px-2 flex items-center justify-center\">\r\n          <h1 className=\"text-lg font-semibold text-tally-text text-center truncate\">\r\n            {title}\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Right: Logo or spacer */}\r\n        <div className=\"flex items-center justify-end w-12 flex-shrink-0\">\r\n          {showLogo && !isHome ? (\r\n            <TallyLogo size={28} />\r\n          ) : (\r\n            <div className=\"w-10\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,SAAS,UAAU,EAAE,KAAK,EAAE,WAAW,IAAI,EAAE,WAAW,IAAI,EAAkB;;IACnF,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,SAAS,aAAa;IAE5B,MAAM,aAAa;QACjB,IAAI,OAAO,OAAO,CAAC,MAAM,GAAG,GAAG;YAC7B,OAAO,IAAI;QACb,OAAO;YACL,OAAO,IAAI,CAAC;QACd;IACF;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BACZ,CAAC,UAAU,yBACV,6LAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,gOAAS;4BAAC,WAAU;;;;;;;;;;+BAErB,yBACF,6LAAC,+IAAS;wBAAC,MAAM;;;;;6CAEjB,6LAAC;wBAAI,WAAU;;;;;;;;;;;8BAKnB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAG,WAAU;kCACX;;;;;;;;;;;8BAKL,6LAAC;oBAAI,WAAU;8BACZ,YAAY,CAAC,uBACZ,6LAAC,+IAAS;wBAAC,MAAM;;;;;6CAEjB,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;AAM3B;GAnDgB;;QACC,kJAAS;QACP,oJAAW;;;KAFd"}},
    {"offset": {"line": 1620, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AppShell.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ReactNode } from 'react'\r\nimport { BottomNav } from './BottomNav'\r\nimport { AppHeader } from './AppHeader'\r\n\r\nconst NAV_HEIGHT = 88 // match BottomNav\r\n\r\nexport function AppShell({\r\n  children,\r\n  title,\r\n  showBack = false,\r\n  showLogo = true,\r\n}: {\r\n  children: ReactNode\r\n  title?: string\r\n  showBack?: boolean\r\n  showLogo?: boolean\r\n}) {\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-[var(--tally-bg)]\">\r\n      <div className=\"sticky top-0 z-40\">\r\n        <AppHeader title={title ?? ''} showBack={showBack} showLogo={showLogo} />\r\n      </div>\r\n\r\n      {/* THIS is the scroll container */}\r\n      <main className=\"flex-1 overflow-y-auto\">\r\n        {children}\r\n\r\n        {/* Hard spacer so content never sits under the fixed nav */}\r\n        <div\r\n          aria-hidden\r\n          style={{ height: `calc(${NAV_HEIGHT}px + env(safe-area-inset-bottom) + 24px)` }}\r\n        />\r\n      </main>\r\n\r\n      <BottomNav />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,aAAa,GAAG,kBAAkB;;AAEjC,SAAS,SAAS,EACvB,QAAQ,EACR,KAAK,EACL,WAAW,KAAK,EAChB,WAAW,IAAI,EAMhB;IACC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+IAAS;oBAAC,OAAO,SAAS;oBAAI,UAAU;oBAAU,UAAU;;;;;;;;;;;0BAI/D,6LAAC;gBAAK,WAAU;;oBACb;kCAGD,6LAAC;wBACC,aAAW;wBACX,OAAO;4BAAE,QAAQ,CAAC,KAAK,EAAE,WAAW,wCAAwC,CAAC;wBAAC;;;;;;;;;;;;0BAIlF,6LAAC,+IAAS;;;;;;;;;;;AAGhB;KA/BgB"}},
    {"offset": {"line": 1695, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useTodayProfit } from '@/hooks/useTodayProfit'\nimport { useTransactions } from '@/hooks/useTransactions'\nimport { SummaryCard } from '@/components/SummaryCard'\nimport { TransactionList } from '@/components/TransactionList'\nimport { AppShell } from '@/components/AppShell'\nimport { AppHeader } from '@/components/AppHeader'\nimport { useBusiness } from '@/contexts/BusinessContext'\nimport { useTranslation } from 'react-i18next'\nimport Link from 'next/link'\nimport { formatCurrency } from '@/lib/utils'\n\nexport default function MainPage() {\n  const { t } = useTranslation()\n  const { currentBusiness } = useBusiness()\n  const { data: profitData, isLoading: profitLoading } = useTodayProfit()\n  const { data: transactions, isLoading: transactionsLoading, error: transactionsError } = useTransactions()\n\n  const profit = profitData?.profit || 0\n  const revenue = profitData?.revenue || 0\n  const expenses = profitData?.expenses || 0\n\n  return (\n    <AppShell>\n      <AppHeader \n        title={currentBusiness?.name || t('home.title')} \n        showBack={false}\n        showLogo={true}\n      />\n      <div className=\"max-w-md mx-auto px-6 py-6\">\n        {/* Business Name */}\n        {currentBusiness && (\n          <div className=\"mb-6\">\n            <h1 className=\"text-xl font-bold text-text-primary\">\n              {currentBusiness.name}\n            </h1>\n          </div>\n        )}\n\n        {/* Today's Profit Section - Layer 2 */}\n        <div className=\"bg-surface-secondary rounded-xl p-6 mb-6\">\n          {/* Profit Card - Layer 3 */}\n          <div className=\"bg-surface rounded-lg p-8 shadow-sm text-center\">\n            <p className=\"text-sm text-text-secondary mb-2\">{t('home.todayProfit')}</p>\n            {profitLoading ? (\n              <p className=\"text-5xl font-bold tabular-nums text-text-muted\">...</p>\n            ) : (\n              <div className=\"flex items-center justify-center gap-2\">\n                <span className={`text-2xl font-bold ${profit >= 0 ? 'text-money-in' : 'text-money-out'}`}>\n                  {profit >= 0 ? '+' : '-'}\n                </span>\n                <p className=\"text-5xl font-bold tabular-nums text-text-primary\">\n                  {formatCurrency(Math.abs(profit))}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Revenue & Expenses - Secondary small summary */}\n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\n          <SummaryCard\n            label={t('home.revenue')}\n            value={revenue}\n          />\n          <SummaryCard\n            label={t('home.expenses')}\n            value={expenses}\n          />\n        </div>\n\n        {/* Action Buttons - Primary CTAs */}\n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\n          <Link\n            href=\"/sale\"\n            className=\"h-32 bg-[#29978C] hover:bg-[#238579] text-white text-lg font-bold rounded-[var(--tally-radius)] flex items-center justify-center shadow-[var(--tally-shadow)] transition-colors active:scale-95\"\n          >\n            {t('home.recordSale')}\n          </Link>\n          <Link\n            href=\"/expense\"\n            className=\"h-32 bg-[#EA6C3C] hover:bg-[#E56E44] text-white text-lg font-bold rounded-[var(--tally-radius)] flex items-center justify-center shadow-[var(--tally-shadow)] transition-colors active:scale-95\"\n          >\n            {t('home.recordExpense')}\n          </Link>\n        </div>\n\n        {/* Recent Transactions - Layer 2 */}\n        <div className=\"bg-tally-surface-2 rounded-[var(--tally-radius)] p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold text-tally-text mb-4\">{t('home.recentTransactions')}</h2>\n          {transactionsError ? (\n            <div className=\"text-center py-8 text-text-muted\">\n              <p>{t('home.loadingError')}</p>\n            </div>\n          ) : transactionsLoading ? (\n            <div className=\"text-center py-8 text-text-muted\">{t('common.loading')}</div>\n          ) : (\n            <TransactionList transactions={transactions || []} limit={3} />\n          )}\n        </div>\n      </div>\n    </AppShell>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AAXA;;;;;;;;;;;AAae,SAAS;;IACtB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,qJAAW;IACvC,MAAM,EAAE,MAAM,UAAU,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,mJAAc;IACrE,MAAM,EAAE,MAAM,YAAY,EAAE,WAAW,mBAAmB,EAAE,OAAO,iBAAiB,EAAE,GAAG,IAAA,qJAAe;IAExG,MAAM,SAAS,YAAY,UAAU;IACrC,MAAM,UAAU,YAAY,WAAW;IACvC,MAAM,WAAW,YAAY,YAAY;IAEzC,qBACE,6LAAC,6IAAQ;;0BACP,6LAAC,+IAAS;gBACR,OAAO,iBAAiB,QAAQ,EAAE;gBAClC,UAAU;gBACV,UAAU;;;;;;0BAEZ,6LAAC;gBAAI,WAAU;;oBAEZ,iCACC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAG,WAAU;sCACX,gBAAgB,IAAI;;;;;;;;;;;kCAM3B,6LAAC;wBAAI,WAAU;kCAEb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAoC,EAAE;;;;;;gCAClD,8BACC,6LAAC;oCAAE,WAAU;8CAAkD;;;;;yDAE/D,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAW,CAAC,mBAAmB,EAAE,UAAU,IAAI,kBAAkB,kBAAkB;sDACtF,UAAU,IAAI,MAAM;;;;;;sDAEvB,6LAAC;4CAAE,WAAU;sDACV,IAAA,wIAAc,EAAC,KAAK,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;kCAQnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mJAAW;gCACV,OAAO,EAAE;gCACT,OAAO;;;;;;0CAET,6LAAC,mJAAW;gCACV,OAAO,EAAE;gCACT,OAAO;;;;;;;;;;;;kCAKX,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,0KAAI;gCACH,MAAK;gCACL,WAAU;0CAET,EAAE;;;;;;0CAEL,6LAAC,0KAAI;gCACH,MAAK;gCACL,WAAU;0CAET,EAAE;;;;;;;;;;;;kCAKP,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA8C,EAAE;;;;;;4BAC7D,kCACC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;8CAAG,EAAE;;;;;;;;;;uCAEN,oCACF,6LAAC;gCAAI,WAAU;0CAAoC,EAAE;;;;;qDAErD,6LAAC,2JAAe;gCAAC,cAAc,gBAAgB,EAAE;gCAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;AAMtE;GA3FwB;;QACR,qLAAc;QACA,qJAAW;QACgB,mJAAc;QACoB,qJAAe;;;KAJlF"}}]
}
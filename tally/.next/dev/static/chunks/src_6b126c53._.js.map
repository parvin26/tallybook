{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/hooks/useTodayProfit.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { useBusiness } from '@/contexts/BusinessContext'\r\nimport { format } from 'date-fns'\r\n\r\ninterface TodayProfit {\r\n  profit: number\r\n  revenue: number\r\n  expenses: number\r\n}\r\n\r\nexport function useTodayProfit() {\r\n  const { currentBusiness } = useBusiness()\r\n  const today = format(new Date(), 'yyyy-MM-dd')\r\n  \r\n  return useQuery<TodayProfit>({\r\n    queryKey: ['todayProfit', currentBusiness?.id, today],\r\n    queryFn: async () => {\r\n      if (!currentBusiness?.id) {\r\n        return { profit: 0, revenue: 0, expenses: 0 }\r\n      }\r\n      \r\n      console.log(`[useTodayProfit] Fetching today's transactions for business: ${currentBusiness.id}, date: ${today}`)\r\n      \r\n      const { data, error } = await supabase\r\n        .from('transactions')\r\n        .select('transaction_type, amount')\r\n        .eq('business_id', currentBusiness.id)\r\n        .eq('transaction_date', today)\r\n      \r\n      if (error) {\r\n        console.error('[useTodayProfit] Error fetching transactions:', {\r\n          code: error.code,\r\n          message: error.message,\r\n          details: error.details,\r\n        })\r\n        throw error\r\n      }\r\n      \r\n      const revenue = data?.filter(t => t.transaction_type === 'sale' || t.transaction_type === 'payment_received')\r\n        .reduce((sum, t) => sum + t.amount, 0) || 0\r\n      const expenses = data?.filter(t => t.transaction_type === 'expense' || t.transaction_type === 'payment_made')\r\n        .reduce((sum, t) => sum + t.amount, 0) || 0\r\n      \r\n      const profit = revenue - expenses\r\n      console.log(`[useTodayProfit] Today's summary: revenue=${revenue}, expenses=${expenses}, profit=${profit}`)\r\n      \r\n      return { profit, revenue, expenses }\r\n    },\r\n    enabled: !!currentBusiness?.id\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAQO,SAAS;;IACd,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,qJAAW;IACvC,MAAM,QAAQ,IAAA,mKAAM,EAAC,IAAI,QAAQ;IAEjC,OAAO,IAAA,0LAAQ,EAAc;QAC3B,UAAU;YAAC;YAAe,iBAAiB;YAAI;SAAM;QACrD,OAAO;uCAAE;gBACP,IAAI,CAAC,iBAAiB,IAAI;oBACxB,OAAO;wBAAE,QAAQ;wBAAG,SAAS;wBAAG,UAAU;oBAAE;gBAC9C;gBAEA,QAAQ,GAAG,CAAC,CAAC,6DAA6D,EAAE,gBAAgB,EAAE,CAAC,QAAQ,EAAE,OAAO;gBAEhH,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uJAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,4BACP,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,EAAE,CAAC,oBAAoB;gBAE1B,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,iDAAiD;wBAC7D,MAAM,MAAM,IAAI;wBAChB,SAAS,MAAM,OAAO;wBACtB,SAAS,MAAM,OAAO;oBACxB;oBACA,MAAM;gBACR;gBAEA,MAAM,UAAU,MAAM;+CAAO,CAAA,IAAK,EAAE,gBAAgB,KAAK,UAAU,EAAE,gBAAgB,KAAK;8CACvF;+CAAO,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;8CAAE,MAAM;gBAC5C,MAAM,WAAW,MAAM;+CAAO,CAAA,IAAK,EAAE,gBAAgB,KAAK,aAAa,EAAE,gBAAgB,KAAK;8CAC3F;+CAAO,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;8CAAE,MAAM;gBAE5C,MAAM,SAAS,UAAU;gBACzB,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,QAAQ,WAAW,EAAE,SAAS,SAAS,EAAE,QAAQ;gBAE1G,OAAO;oBAAE;oBAAQ;oBAAS;gBAAS;YACrC;;QACA,SAAS,CAAC,CAAC,iBAAiB;IAC9B;AACF;GAxCgB;;QACc,qJAAW;QAGhC,0LAAQ"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/hooks/useTransactions.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { useBusiness } from '@/contexts/BusinessContext'\r\nimport { Transaction } from '@/types'\r\n\r\nexport function useTransactions() {\r\n  const { currentBusiness } = useBusiness()\r\n  \r\n  return useQuery<Transaction[]>({\r\n    queryKey: ['transactions', currentBusiness?.id],\r\n    queryFn: async () => {\r\n      if (!currentBusiness?.id) {\r\n        console.log('[useTransactions] No business ID, returning empty array')\r\n        return []\r\n      }\r\n      \r\n      console.log(`[useTransactions] Fetching transactions for business: ${currentBusiness.id}`)\r\n      \r\n      // First, let's test if we can query transactions at all (without filter)\r\n      const { data: allData, error: allError } = await supabase\r\n        .from('transactions')\r\n        .select('id, business_id, transaction_type, amount, transaction_date')\r\n        .limit(10)\r\n      \r\n      console.log('[useTransactions] Test query (all transactions, limit 10):', {\r\n        count: allData?.length || 0,\r\n        data: allData,\r\n        error: allError ? {\r\n          code: allError.code,\r\n          message: allError.message,\r\n          details: allError.details,\r\n          hint: allError.hint,\r\n        } : null,\r\n      })\r\n      \r\n      if (allData && allData.length > 0) {\r\n        console.log('[useTransactions] Business IDs found in transactions:', \r\n          [...new Set(allData.map(t => t.business_id))]\r\n        )\r\n        console.log('[useTransactions] Current business ID:', currentBusiness.id)\r\n        console.log('[useTransactions] Match?', allData.some(t => t.business_id === currentBusiness.id))\r\n      }\r\n      \r\n      // Now query with business_id filter\r\n      // Note: deleted_at column might not exist yet, so we'll filter in JavaScript\r\n      const { data, error } = await supabase\r\n        .from('transactions')\r\n        .select('*')\r\n        .eq('business_id', currentBusiness.id)\r\n        .order('transaction_date', { ascending: false })\r\n      \r\n      // Filter out soft-deleted transactions in JavaScript (if deleted_at column exists)\r\n      const activeData = data?.filter(t => !t.deleted_at) || data || []\r\n      \r\n      console.log('[useTransactions] Filtered query result:', {\r\n        business_id_filter: currentBusiness.id,\r\n        count: data?.length || 0,\r\n        error: error ? {\r\n          code: error.code,\r\n          message: error.message,\r\n        } : null,\r\n      })\r\n      \r\n      if (error) {\r\n        console.error('[useTransactions] Error fetching transactions:', {\r\n          code: error.code,\r\n          message: error.message,\r\n          details: error.details,\r\n          hint: error.hint,\r\n        })\r\n        throw error\r\n      }\r\n      \r\n      // Sort by transaction_date (desc), then by created_at (desc) for same dates\r\n      const sortedData = activeData.sort((a, b) => {\r\n        const dateA = new Date(a.transaction_date).getTime()\r\n        const dateB = new Date(b.transaction_date).getTime()\r\n        if (dateA !== dateB) {\r\n          return dateB - dateA // Descending by date\r\n        }\r\n        // If same date, sort by created_at\r\n        const createdA = new Date(a.created_at).getTime()\r\n        const createdB = new Date(b.created_at).getTime()\r\n        return createdB - createdA // Descending by created_at\r\n      })\r\n      \r\n      console.log(`[useTransactions] Successfully loaded ${sortedData.length} transactions`)\r\n      if (sortedData.length > 0) {\r\n        console.log('[useTransactions] Sample transaction:', {\r\n          id: sortedData[0].id,\r\n          type: sortedData[0].transaction_type,\r\n          amount: sortedData[0].amount,\r\n          date: sortedData[0].transaction_date,\r\n          created_at: sortedData[0].created_at,\r\n        })\r\n      }\r\n      \r\n      return sortedData\r\n    },\r\n    enabled: !!currentBusiness?.id,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnMount: true,\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAGO,SAAS;;IACd,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,qJAAW;IAEvC,OAAO,IAAA,0LAAQ,EAAgB;QAC7B,UAAU;YAAC;YAAgB,iBAAiB;SAAG;QAC/C,OAAO;wCAAE;gBACP,IAAI,CAAC,iBAAiB,IAAI;oBACxB,QAAQ,GAAG,CAAC;oBACZ,OAAO,EAAE;gBACX;gBAEA,QAAQ,GAAG,CAAC,CAAC,sDAAsD,EAAE,gBAAgB,EAAE,EAAE;gBAEzF,yEAAyE;gBACzE,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,uJAAQ,CACtD,IAAI,CAAC,gBACL,MAAM,CAAC,+DACP,KAAK,CAAC;gBAET,QAAQ,GAAG,CAAC,8DAA8D;oBACxE,OAAO,SAAS,UAAU;oBAC1B,MAAM;oBACN,OAAO,WAAW;wBAChB,MAAM,SAAS,IAAI;wBACnB,SAAS,SAAS,OAAO;wBACzB,SAAS,SAAS,OAAO;wBACzB,MAAM,SAAS,IAAI;oBACrB,IAAI;gBACN;gBAEA,IAAI,WAAW,QAAQ,MAAM,GAAG,GAAG;oBACjC,QAAQ,GAAG,CAAC,yDACV;2BAAI,IAAI,IAAI,QAAQ,GAAG;wDAAC,CAAA,IAAK,EAAE,WAAW;;qBAAG;oBAE/C,QAAQ,GAAG,CAAC,0CAA0C,gBAAgB,EAAE;oBACxE,QAAQ,GAAG,CAAC,4BAA4B,QAAQ,IAAI;oDAAC,CAAA,IAAK,EAAE,WAAW,KAAK,gBAAgB,EAAE;;gBAChG;gBAEA,oCAAoC;gBACpC,6EAA6E;gBAC7E,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uJAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,KAAK,CAAC,oBAAoB;oBAAE,WAAW;gBAAM;gBAEhD,mFAAmF;gBACnF,MAAM,aAAa,MAAM;gDAAO,CAAA,IAAK,CAAC,EAAE,UAAU;kDAAK,QAAQ,EAAE;gBAEjE,QAAQ,GAAG,CAAC,4CAA4C;oBACtD,oBAAoB,gBAAgB,EAAE;oBACtC,OAAO,MAAM,UAAU;oBACvB,OAAO,QAAQ;wBACb,MAAM,MAAM,IAAI;wBAChB,SAAS,MAAM,OAAO;oBACxB,IAAI;gBACN;gBAEA,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,kDAAkD;wBAC9D,MAAM,MAAM,IAAI;wBAChB,SAAS,MAAM,OAAO;wBACtB,SAAS,MAAM,OAAO;wBACtB,MAAM,MAAM,IAAI;oBAClB;oBACA,MAAM;gBACR;gBAEA,4EAA4E;gBAC5E,MAAM,aAAa,WAAW,IAAI;2DAAC,CAAC,GAAG;wBACrC,MAAM,QAAQ,IAAI,KAAK,EAAE,gBAAgB,EAAE,OAAO;wBAClD,MAAM,QAAQ,IAAI,KAAK,EAAE,gBAAgB,EAAE,OAAO;wBAClD,IAAI,UAAU,OAAO;4BACnB,OAAO,QAAQ,MAAM,qBAAqB;;wBAC5C;wBACA,mCAAmC;wBACnC,MAAM,WAAW,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;wBAC/C,MAAM,WAAW,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;wBAC/C,OAAO,WAAW,SAAS,2BAA2B;;oBACxD;;gBAEA,QAAQ,GAAG,CAAC,CAAC,sCAAsC,EAAE,WAAW,MAAM,CAAC,aAAa,CAAC;gBACrF,IAAI,WAAW,MAAM,GAAG,GAAG;oBACzB,QAAQ,GAAG,CAAC,yCAAyC;wBACnD,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE;wBACpB,MAAM,UAAU,CAAC,EAAE,CAAC,gBAAgB;wBACpC,QAAQ,UAAU,CAAC,EAAE,CAAC,MAAM;wBAC5B,MAAM,UAAU,CAAC,EAAE,CAAC,gBAAgB;wBACpC,YAAY,UAAU,CAAC,EAAE,CAAC,UAAU;oBACtC;gBACF;gBAEA,OAAO;YACT;;QACA,SAAS,CAAC,CAAC,iBAAiB;QAC5B,sBAAsB;QACtB,gBAAgB;IAClB;AACF;GAlGgB;;QACc,qJAAW;QAEhC,0LAAQ"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatCurrency(amount: number, direction?: 'in' | 'out'): string {\r\n  const formatted = new Intl.NumberFormat('ms-MY', {\r\n    style: 'currency',\r\n    currency: 'MYR',\r\n    minimumFractionDigits: 2\r\n  }).format(amount).replace('MYR', 'RM')\r\n  \r\n  if (direction === 'in') {\r\n    return `+ ${formatted}`\r\n  } else if (direction === 'out') {\r\n    return `â€“ ${formatted}`\r\n  }\r\n  \r\n  return formatted\r\n}\r\n\r\nexport function formatDate(date: Date | string): string {\r\n  return new Date(date).toLocaleDateString('ms-MY', {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    year: 'numeric'\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS,eAAe,MAAc,EAAE,SAAwB;IACrE,MAAM,YAAY,IAAI,KAAK,YAAY,CAAC,SAAS;QAC/C,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC,QAAQ,OAAO,CAAC,OAAO;IAEjC,IAAI,cAAc,MAAM;QACtB,OAAO,CAAC,EAAE,EAAE,WAAW;IACzB,OAAO,IAAI,cAAc,OAAO;QAC9B,OAAO,CAAC,EAAE,EAAE,WAAW;IACzB;IAEA,OAAO;AACT;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,KAAK;QACL,OAAO;QACP,MAAM;IACR;AACF"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AmountInput.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { InputHTMLAttributes } from 'react'\r\n\r\ninterface AmountInputProps extends Omit<InputHTMLAttributes<HTMLInputElement>, 'value' | 'onChange'> {\r\n  value: string\r\n  onChange: (value: string) => void\r\n}\r\n\r\nexport function AmountInput({ value, onChange, autoFocus, ...props }: AmountInputProps) {\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const input = e.target.value\r\n    // Only allow numbers and one decimal point\r\n    const sanitized = input.replace(/[^0-9.]/g, '')\r\n    // Ensure only one decimal point\r\n    const parts = sanitized.split('.')\r\n    const formatted = parts.length > 2 \r\n      ? parts[0] + '.' + parts.slice(1).join('')\r\n      : sanitized\r\n    onChange(formatted)\r\n  }\r\n\r\n  const displayValue = value || '0.00'\r\n\r\n  return (\r\n    <div className=\"relative w-full text-center\">\r\n      <div className=\"text-5xl font-bold tabular-nums text-[var(--tally-text)]\">\r\n        RM {displayValue}\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        inputMode=\"decimal\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        autoFocus={autoFocus}\r\n        className=\"absolute inset-0 w-full text-5xl font-bold tabular-nums bg-transparent border-none outline-none text-transparent caret-[var(--tally-text)]\"\r\n        style={{ \r\n          fontFamily: 'system-ui, -apple-system, sans-serif',\r\n        }}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AASO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAyB;IACpF,MAAM,eAAe,CAAC;QACpB,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,2CAA2C;QAC3C,MAAM,YAAY,MAAM,OAAO,CAAC,YAAY;QAC5C,gCAAgC;QAChC,MAAM,QAAQ,UAAU,KAAK,CAAC;QAC9B,MAAM,YAAY,MAAM,MAAM,GAAG,IAC7B,KAAK,CAAC,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MACrC;QACJ,SAAS;IACX;IAEA,MAAM,eAAe,SAAS;IAE9B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBAA2D;oBACpE;;;;;;;0BAEN,6LAAC;gBACC,MAAK;gBACL,WAAU;gBACV,OAAO;gBACP,UAAU;gBACV,WAAW;gBACX,WAAU;gBACV,OAAO;oBACL,YAAY;gBACd;gBACC,GAAG,KAAK;;;;;;;;;;;;AAIjB;KAlCgB"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/PaymentTypeSelectorLovable.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Wallet, Smartphone, Building2, MoreHorizontal, Check } from 'lucide-react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ntype PaymentType = 'cash' | 'mobile_money' | 'bank_transfer' | 'other'\r\n\r\ninterface PaymentTypeSelectorLovableProps {\r\n  value: string\r\n  onChange: (value: PaymentType) => void\r\n}\r\n\r\nexport function PaymentTypeSelectorLovable({ value, onChange }: PaymentTypeSelectorLovableProps) {\r\n  const { t } = useTranslation()\r\n  \r\n  const paymentTypes: Array<{ value: PaymentType; labelKey: string; icon: typeof Wallet }> = [\r\n    { value: 'cash', labelKey: 'paymentTypes.cash', icon: Wallet },\r\n    { value: 'mobile_money', labelKey: 'paymentTypes.mobile_money', icon: Smartphone },\r\n    { value: 'bank_transfer', labelKey: 'paymentTypes.bank_transfer', icon: Building2 },\r\n    { value: 'other', labelKey: 'paymentTypes.other', icon: MoreHorizontal },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 gap-3\">\r\n      {paymentTypes.map((type) => {\r\n        const Icon = type.icon\r\n        const isSelected = value === type.value\r\n        return (\r\n          <button\r\n            key={type.value}\r\n            type=\"button\"\r\n            onClick={() => onChange(type.value)}\r\n            className={`relative px-4 py-3 rounded-lg border-2 transition-all ${\r\n              isSelected\r\n                ? 'bg-[rgba(41,151,140,0.12)] border-[#29978C] text-[#29978C]'\r\n                : 'bg-[var(--tally-surface)] border-[var(--tally-border)] text-[var(--tally-text)]'\r\n            } hover:border-[var(--tally-text-muted)] active:scale-95`}\r\n          >\r\n            {isSelected && (\r\n              <div className=\"absolute top-1 right-1 w-5 h-5 bg-[#29978C] rounded-full flex items-center justify-center\">\r\n                <Check className=\"w-3 h-3 text-white\" />\r\n              </div>\r\n            )}\r\n            <div className=\"flex flex-col items-center gap-2\">\r\n              <Icon className=\"w-5 h-5\" />\r\n              <span className=\"text-sm font-medium\">{t(type.labelKey)}</span>\r\n            </div>\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;;;AAHA;;;AAYO,SAAS,2BAA2B,EAAE,KAAK,EAAE,QAAQ,EAAmC;;IAC7F,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAE5B,MAAM,eAAqF;QACzF;YAAE,OAAO;YAAQ,UAAU;YAAqB,MAAM,mNAAM;QAAC;QAC7D;YAAE,OAAO;YAAgB,UAAU;YAA6B,MAAM,+NAAU;QAAC;QACjF;YAAE,OAAO;YAAiB,UAAU;YAA8B,MAAM,gOAAS;QAAC;QAClF;YAAE,OAAO;YAAS,UAAU;YAAsB,MAAM,qOAAc;QAAC;KACxE;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC;YACjB,MAAM,OAAO,KAAK,IAAI;YACtB,MAAM,aAAa,UAAU,KAAK,KAAK;YACvC,qBACE,6LAAC;gBAEC,MAAK;gBACL,SAAS,IAAM,SAAS,KAAK,KAAK;gBAClC,WAAW,CAAC,sDAAsD,EAChE,aACI,+DACA,kFACL,uDAAuD,CAAC;;oBAExD,4BACC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,gNAAK;4BAAC,WAAU;;;;;;;;;;;kCAGrB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;;;;;;0CAChB,6LAAC;gCAAK,WAAU;0CAAuB,EAAE,KAAK,QAAQ;;;;;;;;;;;;;eAhBnD,KAAK,KAAK;;;;;QAoBrB;;;;;;AAGN;GAxCgB;;QACA,qLAAc;;;KADd"}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/CategorySelectorLovable.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Package, Car, Zap, Home, Users, Utensils, Wrench, MoreHorizontal, Check } from 'lucide-react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ntype Category = 'supplies' | 'transport' | 'utilities' | 'rent' | 'wages' | 'food' | 'maintenance' | 'other'\r\n\r\ninterface CategorySelectorLovableProps {\r\n  value: string\r\n  onChange: (value: Category) => void\r\n}\r\n\r\nexport function CategorySelectorLovable({ value, onChange }: CategorySelectorLovableProps) {\r\n  const { t } = useTranslation()\r\n  \r\n  const categories: Array<{ value: Category; labelKey: string; icon: typeof Package }> = [\r\n    { value: 'supplies', labelKey: 'expenseCategories.supplies', icon: Package },\r\n    { value: 'transport', labelKey: 'expenseCategories.transport', icon: Car },\r\n    { value: 'utilities', labelKey: 'expenseCategories.utilities', icon: Zap },\r\n    { value: 'rent', labelKey: 'expenseCategories.rent', icon: Home },\r\n    { value: 'wages', labelKey: 'expenseCategories.wages', icon: Users },\r\n    { value: 'food', labelKey: 'expenseCategories.food', icon: Utensils },\r\n    { value: 'maintenance', labelKey: 'expenseCategories.maintenance', icon: Wrench },\r\n    { value: 'other', labelKey: 'expenseCategories.other', icon: MoreHorizontal },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-4 gap-3\">\r\n      {categories.map((category) => {\r\n        const Icon = category.icon\r\n        const isSelected = value === category.value\r\n        return (\r\n          <button\r\n            key={category.value}\r\n            type=\"button\"\r\n            onClick={() => onChange(category.value)}\r\n            className={`relative px-3 py-4 rounded-lg border-2 transition-all ${\r\n              isSelected\r\n                ? 'bg-[rgba(234,108,60,0.12)] border-[#EA6C3C] text-[#EA6C3C]'\r\n                : 'bg-[var(--tally-surface)] border-[var(--tally-border)] text-[var(--tally-text)]'\r\n            } hover:border-[var(--tally-text-muted)] active:scale-95`}\r\n          >\r\n            {isSelected && (\r\n              <div className=\"absolute top-1 right-1 w-5 h-5 bg-[#EA6C3C] rounded-full flex items-center justify-center\">\r\n                <Check className=\"w-3 h-3 text-white\" />\r\n              </div>\r\n            )}\r\n            <div className=\"flex flex-col items-center gap-2\">\r\n              <Icon className=\"w-5 h-5\" />\r\n              <span className=\"text-xs font-medium text-center leading-tight\">{t(category.labelKey)}</span>\r\n            </div>\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;;;AAHA;;;AAYO,SAAS,wBAAwB,EAAE,KAAK,EAAE,QAAQ,EAAgC;;IACvF,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAE5B,MAAM,aAAiF;QACrF;YAAE,OAAO;YAAY,UAAU;YAA8B,MAAM,sNAAO;QAAC;QAC3E;YAAE,OAAO;YAAa,UAAU;YAA+B,MAAM,0MAAG;QAAC;QACzE;YAAE,OAAO;YAAa,UAAU;YAA+B,MAAM,0MAAG;QAAC;QACzE;YAAE,OAAO;YAAQ,UAAU;YAA0B,MAAM,8MAAI;QAAC;QAChE;YAAE,OAAO;YAAS,UAAU;YAA2B,MAAM,gNAAK;QAAC;QACnE;YAAE,OAAO;YAAQ,UAAU;YAA0B,MAAM,yNAAQ;QAAC;QACpE;YAAE,OAAO;YAAe,UAAU;YAAiC,MAAM,mNAAM;QAAC;QAChF;YAAE,OAAO;YAAS,UAAU;YAA2B,MAAM,qOAAc;QAAC;KAC7E;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,WAAW,GAAG,CAAC,CAAC;YACf,MAAM,OAAO,SAAS,IAAI;YAC1B,MAAM,aAAa,UAAU,SAAS,KAAK;YAC3C,qBACE,6LAAC;gBAEC,MAAK;gBACL,SAAS,IAAM,SAAS,SAAS,KAAK;gBACtC,WAAW,CAAC,sDAAsD,EAChE,aACI,+DACA,kFACL,uDAAuD,CAAC;;oBAExD,4BACC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,gNAAK;4BAAC,WAAU;;;;;;;;;;;kCAGrB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;;;;;;0CAChB,6LAAC;gCAAK,WAAU;0CAAiD,EAAE,SAAS,QAAQ;;;;;;;;;;;;;eAhBjF,SAAS,KAAK;;;;;QAoBzB;;;;;;AAGN;GA5CgB;;QACA,qLAAc;;;KADd"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/ui/dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from \"react\"\r\nimport { X } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface DialogProps {\r\n  open?: boolean\r\n  onOpenChange?: (open: boolean) => void\r\n  children: React.ReactNode\r\n}\r\n\r\ninterface DialogContextValue {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n}\r\n\r\nconst DialogContext = React.createContext<DialogContextValue | undefined>(undefined)\r\n\r\nexport function Dialog({ open, onOpenChange, children }: DialogProps) {\r\n  return (\r\n    <DialogContext.Provider value={{ open: open ?? false, onOpenChange: onOpenChange ?? (() => {}) }}>\r\n      {open && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n          <div \r\n            className=\"fixed inset-0 bg-black/50\"\r\n            onClick={() => onOpenChange?.(false)}\r\n          />\r\n          <div className=\"relative z-50 w-full max-w-md mx-4\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </DialogContext.Provider>\r\n  )\r\n}\r\n\r\nexport function DialogTrigger({ \r\n  asChild, \r\n  children, \r\n  ...props \r\n}: { asChild?: boolean; children: React.ReactNode } & React.ButtonHTMLAttributes<HTMLButtonElement>) {\r\n  const context = React.useContext(DialogContext)\r\n  if (!context) throw new Error(\"DialogTrigger must be used within Dialog\")\r\n  \r\n  if (asChild && React.isValidElement(children)) {\r\n    return React.cloneElement(children, {\r\n      ...props,\r\n      onClick: () => context.onOpenChange(true),\r\n    } as React.ButtonHTMLAttributes<HTMLButtonElement>)\r\n  }\r\n  \r\n  return (\r\n    <button {...props} onClick={() => context.onOpenChange(true)}>\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n\r\nexport function DialogContent({ \r\n  className, \r\n  children \r\n}: { className?: string; children: React.ReactNode }) {\r\n  const context = React.useContext(DialogContext)\r\n  if (!context) throw new Error(\"DialogContent must be used within Dialog\")\r\n  \r\n  return (\r\n    <div className={cn(\r\n      \"bg-[var(--tally-surface)] rounded-lg shadow-lg p-6 max-h-[90vh] overflow-y-auto border border-[var(--tally-border)]\",\r\n      className\r\n    )}>\r\n      <button\r\n        onClick={() => context.onOpenChange(false)}\r\n        className=\"absolute top-4 right-4 rounded-sm opacity-70 hover:opacity-100 text-[var(--tally-text-muted)]\"\r\n        aria-label=\"Close\"\r\n      >\r\n        <X className=\"h-4 w-4\" />\r\n      </button>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DialogHeader({ className, children }: { className?: string; children: React.ReactNode }) {\r\n  return (\r\n    <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left mb-4\", className)}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DialogTitle({ className, children }: { className?: string; children: React.ReactNode }) {\r\n  return (\r\n    <h2 className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}>\r\n      {children}\r\n    </h2>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBA,MAAM,8BAAgB,8KAAmB,CAAiC;AAEnE,SAAS,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAe;IAClE,qBACE,6LAAC,cAAc,QAAQ;QAAC,OAAO;YAAE,MAAM,QAAQ;YAAO,cAAc,gBAAgB,CAAC,KAAO,CAAC;QAAE;kBAC5F,sBACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAU;oBACV,SAAS,IAAM,eAAe;;;;;;8BAEhC,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAMb;KAhBgB;AAkBT,SAAS,cAAc,EAC5B,OAAO,EACP,QAAQ,EACR,GAAG,OAC8F;;IACjG,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAE9B,IAAI,yBAAW,+KAAoB,CAAC,WAAW;QAC7C,qBAAO,6KAAkB,CAAC,UAAU;YAClC,GAAG,KAAK;YACR,SAAS,IAAM,QAAQ,YAAY,CAAC;QACtC;IACF;IAEA,qBACE,6LAAC;QAAQ,GAAG,KAAK;QAAE,SAAS,IAAM,QAAQ,YAAY,CAAC;kBACpD;;;;;;AAGP;GApBgB;MAAA;AAsBT,SAAS,cAAc,EAC5B,SAAS,EACT,QAAQ,EAC0C;;IAClD,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAE9B,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAChB,uHACA;;0BAEA,6LAAC;gBACC,SAAS,IAAM,QAAQ,YAAY,CAAC;gBACpC,WAAU;gBACV,cAAW;0BAEX,cAAA,6LAAC,oMAAC;oBAAC,WAAU;;;;;;;;;;;YAEd;;;;;;;AAGP;IAtBgB;MAAA;AAwBT,SAAS,aAAa,EAAE,SAAS,EAAE,QAAQ,EAAqD;IACrG,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,2DAA2D;kBAC3E;;;;;;AAGP;MANgB;AAQT,SAAS,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAqD;IACpG,qBACE,6LAAC;QAAG,WAAW,IAAA,4HAAE,EAAC,qDAAqD;kBACpE;;;;;;AAGP;MANgB"}},
    {"offset": {"line": 721, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-[var(--tally-radius)] border border-[var(--tally-border)] bg-[var(--tally-surface)] px-3 py-2 text-sm ring-offset-[var(--tally-bg)] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-[var(--tally-text-muted)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(41,151,140,0.25)] focus-visible:border-[#29978C] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-150\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,6eACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/EditTransactionModal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { supabase } from '@/lib/supabase/supabaseClient'\r\nimport { toast } from 'sonner'\r\nimport { Transaction } from '@/types'\r\nimport { AmountInput } from '@/components/AmountInput'\r\nimport { PaymentTypeSelectorLovable } from '@/components/PaymentTypeSelectorLovable'\r\nimport { CategorySelectorLovable } from '@/components/CategorySelectorLovable'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { format } from 'date-fns'\r\nimport { parseISO } from 'date-fns'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\n// Map database payment types to Lovable types\r\nconst dbToLovablePaymentType: Record<string, 'cash' | 'mobile_money' | 'bank_transfer' | 'other'> = {\r\n  cash: 'cash',\r\n  bank_transfer: 'bank_transfer',\r\n  duitnow: 'mobile_money',\r\n  tng: 'mobile_money',\r\n  boost: 'mobile_money',\r\n  grabpay: 'mobile_money',\r\n  shopeepay: 'mobile_money',\r\n  credit: 'other',\r\n}\r\n\r\n// Map Lovable payment types to database types\r\nconst lovableToDbPaymentType: Record<'cash' | 'mobile_money' | 'bank_transfer' | 'other', string> = {\r\n  cash: 'cash',\r\n  mobile_money: 'duitnow',\r\n  bank_transfer: 'bank_transfer',\r\n  other: 'credit',\r\n}\r\n\r\n// Map database categories to Lovable categories\r\nconst dbToLovableCategory: Record<string, 'supplies' | 'transport' | 'utilities' | 'rent' | 'wages' | 'food' | 'maintenance' | 'other'> = {\r\n  stock_purchase: 'supplies',\r\n  transport: 'transport',\r\n  utilities: 'utilities',\r\n  rent: 'rent',\r\n  salaries: 'wages',\r\n  food: 'food',\r\n  maintenance: 'maintenance',\r\n  other: 'other',\r\n}\r\n\r\n// Map Lovable categories to database categories\r\nconst lovableToDbCategory: Record<'supplies' | 'transport' | 'utilities' | 'rent' | 'wages' | 'food' | 'maintenance' | 'other', string> = {\r\n  supplies: 'stock_purchase',\r\n  transport: 'transport',\r\n  utilities: 'utilities',\r\n  rent: 'rent',\r\n  wages: 'salaries',\r\n  food: 'other',\r\n  maintenance: 'other',\r\n  other: 'other',\r\n}\r\n\r\ninterface EditTransactionModalProps {\r\n  transaction: Transaction\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  onDelete?: () => void\r\n}\r\n\r\nexport function EditTransactionModal({ transaction, open, onOpenChange, onDelete }: EditTransactionModalProps) {\r\n  const { t } = useTranslation()\r\n  const queryClient = useQueryClient()\r\n  const isExpense = transaction.transaction_type === 'expense' || transaction.transaction_type === 'payment_made'\r\n  \r\n  // Convert database values to Lovable values\r\n  const lovablePaymentType = dbToLovablePaymentType[transaction.payment_type] || 'cash'\r\n  const lovableCategory = transaction.expense_category \r\n    ? (dbToLovableCategory[transaction.expense_category] || 'other')\r\n    : 'other'\r\n\r\n  const [amount, setAmount] = useState(transaction.amount.toString())\r\n  const [paymentType, setPaymentType] = useState<'cash' | 'mobile_money' | 'bank_transfer' | 'other'>(lovablePaymentType)\r\n  const [category, setCategory] = useState<'supplies' | 'transport' | 'utilities' | 'rent' | 'wages' | 'food' | 'maintenance' | 'other'>(lovableCategory)\r\n  const [notes, setNotes] = useState(transaction.notes || '')\r\n  const [otherPaymentText, setOtherPaymentText] = useState('')\r\n  const [otherCategoryText, setOtherCategoryText] = useState('')\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)\r\n\r\n  // Extract \"Other\" text from notes if present\r\n  useEffect(() => {\r\n    if (transaction.notes && transaction.notes.includes('[Other:') && transaction.notes.includes(']')) {\r\n      const match = transaction.notes.match(/\\[Other:\\s*([^\\]]+)\\]/)\r\n      if (match) {\r\n        const otherText = match[1]\r\n        const cleanNotes = transaction.notes.replace(/\\[Other:\\s*[^\\]]+\\]\\s*/, '').trim()\r\n        setNotes(cleanNotes)\r\n        // Determine if it's payment or category \"other\" based on transaction type\r\n        if (isExpense && lovableCategory === 'other') {\r\n          setOtherCategoryText(otherText)\r\n        } else if (lovablePaymentType === 'other') {\r\n          setOtherPaymentText(otherText)\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const amountNum = parseFloat(amount)\r\n      if (isNaN(amountNum) || amountNum <= 0) {\r\n        throw new Error(t('transaction.invalidAmount'))\r\n      }\r\n\r\n      // Convert Lovable values back to database values\r\n      const dbPaymentType = lovableToDbPaymentType[paymentType]\r\n      const dbCategory = isExpense ? lovableToDbCategory[category] : undefined\r\n      \r\n      // Combine notes with \"Other\" text if applicable\r\n      let combinedNotes = notes\r\n      if (isExpense && category === 'other' && otherCategoryText.trim()) {\r\n        combinedNotes = `[Other: ${otherCategoryText.trim()}] ${notes}`.trim()\r\n      } else if (paymentType === 'other' && otherPaymentText.trim()) {\r\n        combinedNotes = `[Other: ${otherPaymentText.trim()}] ${notes}`.trim()\r\n      }\r\n\r\n      const updateData: any = {\r\n        amount: amountNum,\r\n        payment_type: dbPaymentType,\r\n        notes: combinedNotes || null,\r\n      }\r\n\r\n      if (isExpense && dbCategory) {\r\n        updateData.expense_category = dbCategory\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('transactions')\r\n        .update(updateData)\r\n        .eq('id', transaction.id)\r\n\r\n      if (error) throw error\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['transactions'] })\r\n      queryClient.invalidateQueries({ queryKey: ['transaction', transaction.id] })\r\n      queryClient.invalidateQueries({ queryKey: ['todayProfit'] })\r\n      toast.success(t('transaction.updated'))\r\n      onOpenChange(false)\r\n    },\r\n    onError: () => {\r\n      toast.error(t('common.couldntSave'))\r\n    },\r\n  })\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const { error } = await supabase\r\n        .from('transactions')\r\n        .update({ deleted_at: new Date().toISOString() })\r\n        .eq('id', transaction.id)\r\n\r\n      if (error) throw error\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['transactions'] })\r\n      queryClient.invalidateQueries({ queryKey: ['todayProfit'] })\r\n      toast.success(t('transaction.deleted'))\r\n      onOpenChange(false)\r\n      onDelete?.()\r\n    },\r\n    onError: () => {\r\n      toast.error(t('common.couldntDelete'))\r\n    },\r\n  })\r\n\r\n  const handleSave = () => {\r\n    updateMutation.mutate()\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if (!showDeleteConfirm) {\r\n      setShowDeleteConfirm(true)\r\n      return\r\n    }\r\n    deleteMutation.mutate()\r\n  }\r\n\r\n  const txDate = parseISO(transaction.transaction_date)\r\n  const dateStr = format(txDate, 'dd MMM yyyy')\r\n  const timeStr = format(txDate, 'h:mm a')\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-[480px] max-h-[90vh] overflow-y-auto bg-[var(--tally-bg)]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-xl font-bold text-[var(--tally-text)]\">{t('transaction.editTitle')}</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6 pt-4\">\r\n          {/* Non-editable: Date and Time */}\r\n          <div className=\"space-y-2\">\r\n            <p className=\"text-xs text-[var(--tally-text-muted)]\">{t('transaction.date')}</p>\r\n            <p className=\"text-sm text-[var(--tally-text)]\">{dateStr}</p>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <p className=\"text-xs text-[var(--tally-text-muted)]\">{t('transaction.time')}</p>\r\n            <p className=\"text-sm text-[var(--tally-text)]\">{timeStr}</p>\r\n          </div>\r\n\r\n          {/* Primary field: Amount */}\r\n          <div className=\"bg-[var(--tally-surface)] rounded-lg border border-[var(--tally-border)] p-8\">\r\n            <AmountInput\r\n              value={amount}\r\n              onChange={setAmount}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          {/* Payment Type */}\r\n          <div>\r\n            <label className=\"block text-sm text-[var(--tally-text-muted)] mb-3 font-medium\">{t('transaction.paymentType')}</label>\r\n            <PaymentTypeSelectorLovable value={paymentType} onChange={setPaymentType} />\r\n            {paymentType === 'other' && (\r\n              <div className=\"mt-3\">\r\n                <label className=\"block text-sm text-[var(--tally-text-muted)] mb-2 font-medium\">\r\n                  {t('transaction.otherPaymentType')}\r\n                </label>\r\n                <Input\r\n                  value={otherPaymentText}\r\n                  onChange={(e) => setOtherPaymentText(e.target.value)}\r\n                  placeholder={t('transaction.otherPaymentPlaceholder')}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Category (only for expenses) */}\r\n          {isExpense && (\r\n            <div>\r\n              <label className=\"block text-sm text-[var(--tally-text-muted)] mb-3 font-medium\">{t('transaction.category')}</label>\r\n              <CategorySelectorLovable value={category} onChange={setCategory} />\r\n              {category === 'other' && (\r\n                <div className=\"mt-3\">\r\n                  <label className=\"block text-sm text-[var(--tally-text-muted)] mb-2 font-medium\">\r\n                    {t('transaction.otherDescription')}\r\n                  </label>\r\n                  <Input\r\n                    value={otherCategoryText}\r\n                    onChange={(e) => setOtherCategoryText(e.target.value)}\r\n                    placeholder={t('transaction.otherDescriptionPlaceholder')}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Notes */}\r\n          <div>\r\n            <label className=\"block text-sm text-[var(--tally-text-muted)] mb-2 font-medium\">\r\n              {t('transaction.notes')} <span className=\"text-xs\">({t('common.optional')})</span>\r\n            </label>\r\n            <textarea\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              placeholder={t('transaction.addNotesPlaceholder')}\r\n              className=\"w-full p-3 border border-[var(--tally-border)] rounded-lg bg-[var(--tally-surface)] placeholder:text-[var(--tally-text-muted)] focus:outline-none focus:ring-2 focus:ring-[rgba(41,151,140,0.25)] focus:border-[#29978C] focus:ring-offset-2\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"space-y-3 pt-4 border-t border-[var(--tally-border)]\">\r\n            {/* Save Button */}\r\n            <button\r\n              onClick={handleSave}\r\n              disabled={updateMutation.isPending || !amount || parseFloat(amount) <= 0}\r\n            className=\"w-full h-14 bg-[#29978C] hover:bg-[#238579] disabled:bg-[#E5E7EB] disabled:text-[#9CA3AF] disabled:cursor-not-allowed text-white font-semibold rounded-lg shadow-md transition-all active:scale-[0.98]\"\r\n          >\r\n            {updateMutation.isPending ? t('transaction.saving') : t('common.save')}\r\n          </button>\r\n\r\n          {/* Cancel Button */}\r\n          <button\r\n            onClick={() => onOpenChange(false)}\r\n            className=\"w-full h-12 border border-[var(--tally-border)] bg-[var(--tally-surface)] text-[var(--tally-text)] font-medium rounded-lg hover:bg-[var(--tally-surface-2)] transition-colors\"\r\n          >\r\n            {t('common.cancel')}\r\n          </button>\r\n\r\n          {/* Delete Button */}\r\n          <div className=\"pt-2 border-t border-[var(--tally-border)]\">\r\n            {!showDeleteConfirm ? (\r\n              <button\r\n                onClick={handleDelete}\r\n                className=\"w-full h-12 text-[#B94A3A] font-medium rounded-lg hover:bg-[#F7E8E5] transition-colors\"\r\n              >\r\n                {t('transaction.delete')}\r\n              </button>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm text-[var(--tally-text-muted)] text-center mb-2\">\r\n                  {t('transaction.deleteConfirmMessage')}\r\n                </p>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => setShowDeleteConfirm(false)}\r\n                    className=\"flex-1 h-12 border border-[var(--tally-border)] bg-[var(--tally-surface)] text-[var(--tally-text)] font-medium rounded-lg hover:bg-[var(--tally-surface-2)] transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDelete}\r\n                    disabled={deleteMutation.isPending}\r\n                    className=\"flex-1 h-12 bg-[#B94A3A] hover:bg-[#A03A2A] disabled:bg-[#E5E7EB] disabled:text-[#9CA3AF] text-white font-medium rounded-lg transition-colors\"\r\n                  >\r\n                    {deleteMutation.isPending ? t('transaction.deleting') : t('common.delete')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1322, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/TransactionListLovable.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Transaction } from '@/types'\r\nimport { formatCurrency } from '@/lib/utils'\r\nimport { Wallet, Building2, Smartphone, CreditCard, Package, Car, Zap, Home, Users, Utensils, Wrench, MoreHorizontal, Edit } from 'lucide-react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { parseISO, isToday, isYesterday, format, isSameDay } from 'date-fns'\r\nimport { EditTransactionModal } from '@/components/EditTransactionModal'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst paymentIcons: Record<string, typeof Wallet> = {\r\n  cash: Wallet,\r\n  bank_transfer: Building2,\r\n  duitnow: Smartphone,\r\n  tng: Smartphone,\r\n  boost: Smartphone,\r\n  grabpay: Smartphone,\r\n  shopeepay: Smartphone,\r\n  credit: CreditCard,\r\n}\r\n\r\nconst categoryIcons: Record<string, typeof Package> = {\r\n  stock_purchase: Package,\r\n  transport: Car,\r\n  utilities: Zap,\r\n  rent: Home,\r\n  salaries: Users,\r\n  food: Utensils,\r\n  maintenance: Wrench,\r\n  other: MoreHorizontal,\r\n}\r\n\r\ninterface TransactionListLovableProps {\r\n  transactions: Transaction[]\r\n  limit?: number\r\n}\r\n\r\nexport function TransactionListLovable({ transactions, limit }: TransactionListLovableProps) {\r\n  const { t } = useTranslation()\r\n  const router = useRouter()\r\n  const [editingTransaction, setEditingTransaction] = useState<Transaction | null>(null)\r\n\r\n  if (!transactions || transactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12 text-[var(--tally-text-muted)]\">\r\n        <p>{t('home.noTransactions')}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Filter out soft-deleted transactions\r\n  const activeTransactions = transactions.filter(t => !t.deleted_at || t.deleted_at === null)\r\n  const displayTransactions = limit ? activeTransactions.slice(0, limit) : activeTransactions\r\n\r\n  // Group transactions by day\r\n  const today = new Date()\r\n  const yesterday = new Date(today)\r\n  yesterday.setDate(yesterday.getDate() - 1)\r\n\r\n  const todayTransactions = displayTransactions.filter(t => {\r\n    const txDate = parseISO(t.transaction_date)\r\n    return isToday(txDate)\r\n  })\r\n\r\n  const yesterdayTransactions = displayTransactions.filter(t => {\r\n    const txDate = parseISO(t.transaction_date)\r\n    return isYesterday(txDate)\r\n  })\r\n\r\n  const otherTransactions = displayTransactions.filter(t => {\r\n    const txDate = parseISO(t.transaction_date)\r\n    return !isToday(txDate) && !isYesterday(txDate)\r\n  })\r\n\r\n  const renderTransaction = (transaction: Transaction) => {\r\n    const isSale = transaction.transaction_type === 'sale' || transaction.transaction_type === 'payment_received'\r\n    \r\n    // Determine icon\r\n    let Icon = Wallet\r\n    if (transaction.expense_category) {\r\n      Icon = categoryIcons[transaction.expense_category] || MoreHorizontal\r\n    } else {\r\n      Icon = paymentIcons[transaction.payment_type] || Wallet\r\n    }\r\n\r\n    // Determine label\r\n    let label = transaction.expense_category || transaction.payment_type || 'Transaction'\r\n    if (transaction.expense_category) {\r\n      label = t(`expenseCategories.${transaction.expense_category}`) || label\r\n    } else {\r\n      label = t(`paymentTypes.${transaction.payment_type}`) || label\r\n    }\r\n\r\n    // Secondary label (note or time)\r\n    const txDate = parseISO(transaction.transaction_date)\r\n    const timeStr = format(txDate, 'h:mm a')\r\n    const secondaryLabel = transaction.notes || timeStr\r\n\r\n    return (\r\n      <div\r\n        key={transaction.id}\r\n        className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-[var(--tally-surface-2)] transition-colors\"\r\n      >\r\n        <div \r\n          onClick={() => router.push(`/transaction/${transaction.id}`)}\r\n          className=\"flex-1 flex items-center gap-3 cursor-pointer min-w-0\"\r\n        >\r\n          <div className=\"w-10 h-10 rounded-lg bg-[var(--tally-surface)] border border-[var(--tally-border)] flex items-center justify-center flex-shrink-0\">\r\n            <Icon className=\"w-5 h-5 text-[var(--tally-text-muted)]\" />\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <p className=\"text-sm font-medium text-[var(--tally-text)] truncate\">{label}</p>\r\n            <p className=\"text-xs text-[var(--tally-text-muted)] truncate\">{secondaryLabel}</p>\r\n          </div>\r\n          <div className={`text-base font-bold tabular-nums ${\r\n            isSale ? 'text-[#2E7D5B]' : 'text-[#B94A3A]'\r\n          }`}>\r\n            {isSale ? '+' : 'â€“'}{formatCurrency(transaction.amount)}\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation()\r\n            setEditingTransaction(transaction)\r\n          }}\r\n          className=\"p-2 rounded-lg hover:bg-[var(--tally-surface-2)] transition-colors flex-shrink-0\"\r\n          aria-label=\"Edit transaction\"\r\n        >\r\n          <Edit className=\"w-4 h-4 text-[var(--tally-text-muted)]\" />\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"space-y-6\">\r\n      {todayTransactions.length > 0 && (\r\n        <div>\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-sm font-semibold text-[var(--tally-text)]\">{t('history.today')}</h3>\r\n            <span className=\"text-xs text-[var(--tally-text-muted)]\">{todayTransactions.length}</span>\r\n          </div>\r\n          <div className=\"space-y-1\">\r\n            {todayTransactions.map(renderTransaction)}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {yesterdayTransactions.length > 0 && (\r\n        <div>\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-sm font-semibold text-[var(--tally-text)]\">{t('history.yesterday')}</h3>\r\n            <span className=\"text-xs text-[var(--tally-text-muted)]\">{yesterdayTransactions.length}</span>\r\n          </div>\r\n          <div className=\"space-y-1\">\r\n            {yesterdayTransactions.map(renderTransaction)}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n        {otherTransactions.length > 0 && (\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className=\"text-sm font-semibold text-[var(--tally-text)]\">\r\n                {format(parseISO(otherTransactions[0].transaction_date), 'MMMM d, yyyy')}\r\n              </h3>\r\n              <span className=\"text-xs text-[var(--tally-text-muted)]\">{otherTransactions.length}</span>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              {otherTransactions.map(renderTransaction)}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {editingTransaction && (\r\n        <EditTransactionModal\r\n          transaction={editingTransaction}\r\n          open={!!editingTransaction}\r\n          onOpenChange={(open) => !open && setEditingTransaction(null)}\r\n          onDelete={() => {\r\n            setEditingTransaction(null)\r\n            // Optionally refresh or navigate\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;;;AATA;;;;;;;;AAWA,MAAM,eAA8C;IAClD,MAAM,mNAAM;IACZ,eAAe,gOAAS;IACxB,SAAS,+NAAU;IACnB,KAAK,+NAAU;IACf,OAAO,+NAAU;IACjB,SAAS,+NAAU;IACnB,WAAW,+NAAU;IACrB,QAAQ,mOAAU;AACpB;AAEA,MAAM,gBAAgD;IACpD,gBAAgB,sNAAO;IACvB,WAAW,0MAAG;IACd,WAAW,0MAAG;IACd,MAAM,8MAAI;IACV,UAAU,gNAAK;IACf,MAAM,yNAAQ;IACd,aAAa,mNAAM;IACnB,OAAO,qOAAc;AACvB;AAOO,SAAS,uBAAuB,EAAE,YAAY,EAAE,KAAK,EAA+B;;IACzF,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAqB;IAEjF,IAAI,CAAC,gBAAgB,aAAa,MAAM,KAAK,GAAG;QAC9C,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;0BAAG,EAAE;;;;;;;;;;;IAGZ;IAEA,uCAAuC;IACvC,MAAM,qBAAqB,aAAa,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,UAAU,IAAI,EAAE,UAAU,KAAK;IACtF,MAAM,sBAAsB,QAAQ,mBAAmB,KAAK,CAAC,GAAG,SAAS;IAEzE,4BAA4B;IAC5B,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,IAAI,KAAK;IAC3B,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,MAAM,oBAAoB,oBAAoB,MAAM,CAAC,CAAA;QACnD,MAAM,SAAS,IAAA,uJAAQ,EAAC,EAAE,gBAAgB;QAC1C,OAAO,IAAA,qJAAO,EAAC;IACjB;IAEA,MAAM,wBAAwB,oBAAoB,MAAM,CAAC,CAAA;QACvD,MAAM,SAAS,IAAA,uJAAQ,EAAC,EAAE,gBAAgB;QAC1C,OAAO,IAAA,6JAAW,EAAC;IACrB;IAEA,MAAM,oBAAoB,oBAAoB,MAAM,CAAC,CAAA;QACnD,MAAM,SAAS,IAAA,uJAAQ,EAAC,EAAE,gBAAgB;QAC1C,OAAO,CAAC,IAAA,qJAAO,EAAC,WAAW,CAAC,IAAA,6JAAW,EAAC;IAC1C;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,SAAS,YAAY,gBAAgB,KAAK,UAAU,YAAY,gBAAgB,KAAK;QAE3F,iBAAiB;QACjB,IAAI,OAAO,mNAAM;QACjB,IAAI,YAAY,gBAAgB,EAAE;YAChC,OAAO,aAAa,CAAC,YAAY,gBAAgB,CAAC,IAAI,qOAAc;QACtE,OAAO;YACL,OAAO,YAAY,CAAC,YAAY,YAAY,CAAC,IAAI,mNAAM;QACzD;QAEA,kBAAkB;QAClB,IAAI,QAAQ,YAAY,gBAAgB,IAAI,YAAY,YAAY,IAAI;QACxE,IAAI,YAAY,gBAAgB,EAAE;YAChC,QAAQ,EAAE,CAAC,kBAAkB,EAAE,YAAY,gBAAgB,EAAE,KAAK;QACpE,OAAO;YACL,QAAQ,EAAE,CAAC,aAAa,EAAE,YAAY,YAAY,EAAE,KAAK;QAC3D;QAEA,iCAAiC;QACjC,MAAM,SAAS,IAAA,uJAAQ,EAAC,YAAY,gBAAgB;QACpD,MAAM,UAAU,IAAA,mKAAM,EAAC,QAAQ;QAC/B,MAAM,iBAAiB,YAAY,KAAK,IAAI;QAE5C,qBACE,6LAAC;YAEC,WAAU;;8BAEV,6LAAC;oBACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,aAAa,EAAE,YAAY,EAAE,EAAE;oBAC3D,WAAU;;sCAEV,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAK,WAAU;;;;;;;;;;;sCAElB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAyD;;;;;;8CACtE,6LAAC;oCAAE,WAAU;8CAAmD;;;;;;;;;;;;sCAElE,6LAAC;4BAAI,WAAW,CAAC,iCAAiC,EAChD,SAAS,mBAAmB,kBAC5B;;gCACC,SAAS,MAAM;gCAAK,IAAA,wIAAc,EAAC,YAAY,MAAM;;;;;;;;;;;;;8BAG1D,6LAAC;oBACC,SAAS,CAAC;wBACR,EAAE,eAAe;wBACjB,sBAAsB;oBACxB;oBACA,WAAU;oBACV,cAAW;8BAEX,cAAA,6LAAC,sNAAI;wBAAC,WAAU;;;;;;;;;;;;WA5Bb,YAAY,EAAE;;;;;IAgCzB;IAEA,qBACE;;0BACE,6LAAC;gBAAI,WAAU;;oBACd,kBAAkB,MAAM,GAAG,mBAC1B,6LAAC;;0CACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAkD,EAAE;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA0C,kBAAkB,MAAM;;;;;;;;;;;;0CAEpF,6LAAC;gCAAI,WAAU;0CACZ,kBAAkB,GAAG,CAAC;;;;;;;;;;;;oBAK5B,sBAAsB,MAAM,GAAG,mBAC9B,6LAAC;;0CACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAkD,EAAE;;;;;;kDAClE,6LAAC;wCAAK,WAAU;kDAA0C,sBAAsB,MAAM;;;;;;;;;;;;0CAExF,6LAAC;gCAAI,WAAU;0CACZ,sBAAsB,GAAG,CAAC;;;;;;;;;;;;oBAK9B,kBAAkB,MAAM,GAAG,mBAC1B,6LAAC;;0CACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDACX,IAAA,mKAAM,EAAC,IAAA,uJAAQ,EAAC,iBAAiB,CAAC,EAAE,CAAC,gBAAgB,GAAG;;;;;;kDAE3D,6LAAC;wCAAK,WAAU;kDAA0C,kBAAkB,MAAM;;;;;;;;;;;;0CAEpF,6LAAC;gCAAI,WAAU;0CACZ,kBAAkB,GAAG,CAAC;;;;;;;;;;;;;;;;;;YAM9B,oCACC,6LAAC,qKAAoB;gBACnB,aAAa;gBACb,MAAM,CAAC,CAAC;gBACR,cAAc,CAAC,OAAS,CAAC,QAAQ,sBAAsB;gBACvD,UAAU;oBACR,sBAAsB;gBACtB,iCAAiC;gBACnC;;;;;;;;AAKV;GAxJgB;;QACA,qLAAc;QACb,kJAAS;;;KAFV"}},
    {"offset": {"line": 1695, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/BottomNav.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Home, Clock, Package, FileText, HelpCircle } from 'lucide-react'\r\n\r\nconst NAV_HEIGHT = 88\r\n\r\nexport function BottomNav() {\r\n  const { t } = useTranslation()\r\n  const pathname = usePathname()\r\n  \r\n  const navItems = [\r\n    { href: '/', label: t('nav.home'), icon: Home },\r\n    { href: '/history', label: t('nav.records'), icon: Clock },\r\n    { href: '/stock', label: t('nav.stock'), icon: Package },\r\n    { href: '/summary', label: t('nav.reports'), icon: FileText },\r\n    { href: '/help', label: t('nav.help'), icon: HelpCircle },\r\n  ]\r\n\r\n  return (\r\n    <nav \r\n      className=\"fixed bottom-0 left-0 right-0 bg-[var(--tally-surface)] border-t border-tally-border z-50\"\r\n      style={{\r\n        height: '88px',\r\n        paddingBottom: 'env(safe-area-inset-bottom)',\r\n      }}\r\n    >\r\n      <div className=\"max-w-md mx-auto grid grid-cols-5 h-full\">\r\n        {navItems.map((item) => {\r\n          const Icon = item.icon\r\n          const isActive = pathname === item.href\r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className={`flex flex-col items-center justify-center transition-colors flex-1 min-w-0 ${\r\n                isActive ? 'text-tally-sale' : 'text-tally-text-muted'\r\n              }`}\r\n            >\r\n              <Icon className=\"w-6 h-6\" />\r\n              <span className=\"text-[11px] leading-none whitespace-nowrap mt-1\">{item.label}</span>\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;AALA;;;;;AAOA,MAAM,aAAa;AAEZ,SAAS;;IACd,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,WAAW,IAAA,oJAAW;IAE5B,MAAM,WAAW;QACf;YAAE,MAAM;YAAK,OAAO,EAAE;YAAa,MAAM,8MAAI;QAAC;QAC9C;YAAE,MAAM;YAAY,OAAO,EAAE;YAAgB,MAAM,gNAAK;QAAC;QACzD;YAAE,MAAM;YAAU,OAAO,EAAE;YAAc,MAAM,sNAAO;QAAC;QACvD;YAAE,MAAM;YAAY,OAAO,EAAE;YAAgB,MAAM,6NAAQ;QAAC;QAC5D;YAAE,MAAM;YAAS,OAAO,EAAE;YAAa,MAAM,mOAAU;QAAC;KACzD;IAED,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YACL,QAAQ;YACR,eAAe;QACjB;kBAEA,cAAA,6LAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,OAAO,KAAK,IAAI;gBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;gBACvC,qBACE,6LAAC,0KAAI;oBAEH,MAAM,KAAK,IAAI;oBACf,WAAW,CAAC,2EAA2E,EACrF,WAAW,oBAAoB,yBAC/B;;sCAEF,6LAAC;4BAAK,WAAU;;;;;;sCAChB,6LAAC;4BAAK,WAAU;sCAAmD,KAAK,KAAK;;;;;;;mBAPxE,KAAK,IAAI;;;;;YAUpB;;;;;;;;;;;AAIR;GAxCgB;;QACA,qLAAc;QACX,oJAAW;;;KAFd"}},
    {"offset": {"line": 1815, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/assets/tally-logo.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 420, height: 490, blurWidth: 7, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA40lEQVR42j3PS6sBcQAF8H937r3NdK/HkNE0mI3XDIXymLwa8/AfWaCUhdhpFgg14QOgUB4bpZTyRfDNmBGL3+p0Th2QqddUqgynhMQPHPILIReGDj6rguZ2ebcwgcLX7w/2hqCoyamIGmjv13cn4xNzLjynE2ibUA2SdbYCZ0aTDgfKWoKerHn/7qSwl43EHEJVOAet3eqWTUfUI2TPi7x3NYp7tE7M3XWXxKkRUiF/kaOsXJK0JHUJCudIKGj67NUaZmQEQ80Ihhm+//9woiSNQbQoNkhFGj6v9D5kvm/PpFoPU3s4+SS8Td4AAAAASUVORK5CYII=\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,mJAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;IAAG,aAAa;AAAoZ"}},
    {"offset": {"line": 1836, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/TallyLogo.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Image from 'next/image'\r\nimport { useRouter } from 'next/navigation'\r\nimport tallyLogo from '@/assets/tally-logo.png'\r\n\r\ninterface TallyLogoProps {\r\n  size?: number\r\n  className?: string\r\n}\r\n\r\nexport function TallyLogo({ size = 28, className = '' }: TallyLogoProps) {\r\n  const router = useRouter()\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={() => router.push('/')}\r\n      className={`flex items-center justify-center ${className}`}\r\n      aria-label=\"Go to home\"\r\n    >\r\n      <Image\r\n        src={tallyLogo}\r\n        alt=\"Tally\"\r\n        width={size}\r\n        height={size}\r\n        priority\r\n      />\r\n    </button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAWO,SAAS,UAAU,EAAE,OAAO,EAAE,EAAE,YAAY,EAAE,EAAkB;;IACrE,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QACC,MAAK;QACL,SAAS,IAAM,OAAO,IAAI,CAAC;QAC3B,WAAW,CAAC,iCAAiC,EAAE,WAAW;QAC1D,cAAW;kBAEX,cAAA,6LAAC,2IAAK;YACJ,KAAK,4UAAS;YACd,KAAI;YACJ,OAAO;YACP,QAAQ;YACR,QAAQ;;;;;;;;;;;AAIhB;GAnBgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AppHeader.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport { ArrowLeft } from 'lucide-react'\r\nimport { TallyLogo } from './TallyLogo'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ninterface AppHeaderProps {\r\n  title: string\r\n  showBack?: boolean\r\n  showLogo?: boolean\r\n}\r\n\r\nexport function AppHeader({ title, showBack = true, showLogo = true }: AppHeaderProps) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const isHome = pathname === '/'\r\n\r\n  const handleBack = () => {\r\n    if (window.history.length > 1) {\r\n      router.back()\r\n    } else {\r\n      router.push('/')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-40 bg-surface border-b border-tally-border\">\r\n      <div className=\"max-w-md mx-auto px-4 h-16 flex items-center\">\r\n        {/* Left: Back button or Logo */}\r\n        <div className=\"flex items-center justify-start w-12 flex-shrink-0\">\r\n          {!isHome && showBack ? (\r\n            <button\r\n              onClick={handleBack}\r\n              className=\"flex items-center justify-center w-10 h-10 rounded-lg hover:bg-tally-surface-2 transition-colors\"\r\n              aria-label=\"Go back\"\r\n            >\r\n              <ArrowLeft className=\"w-5 h-5 text-tally-text\" />\r\n            </button>\r\n          ) : showLogo ? (\r\n            <TallyLogo size={28} />\r\n          ) : (\r\n            <div className=\"w-10\" />\r\n          )}\r\n        </div>\r\n\r\n        {/* Center: Title */}\r\n        <div className=\"flex-1 min-w-0 px-2 flex items-center justify-center\">\r\n          <h1 className=\"text-lg font-semibold text-tally-text text-center truncate\">\r\n            {title}\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Right: Logo or spacer */}\r\n        <div className=\"flex items-center justify-end w-12 flex-shrink-0\">\r\n          {showLogo && !isHome ? (\r\n            <TallyLogo size={28} />\r\n          ) : (\r\n            <div className=\"w-10\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,SAAS,UAAU,EAAE,KAAK,EAAE,WAAW,IAAI,EAAE,WAAW,IAAI,EAAkB;;IACnF,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,SAAS,aAAa;IAE5B,MAAM,aAAa;QACjB,IAAI,OAAO,OAAO,CAAC,MAAM,GAAG,GAAG;YAC7B,OAAO,IAAI;QACb,OAAO;YACL,OAAO,IAAI,CAAC;QACd;IACF;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BACZ,CAAC,UAAU,yBACV,6LAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,gOAAS;4BAAC,WAAU;;;;;;;;;;+BAErB,yBACF,6LAAC,+IAAS;wBAAC,MAAM;;;;;6CAEjB,6LAAC;wBAAI,WAAU;;;;;;;;;;;8BAKnB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAG,WAAU;kCACX;;;;;;;;;;;8BAKL,6LAAC;oBAAI,WAAU;8BACZ,YAAY,CAAC,uBACZ,6LAAC,+IAAS;wBAAC,MAAM;;;;;6CAEjB,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;AAM3B;GAnDgB;;QACC,kJAAS;QACP,oJAAW;;;KAFd"}},
    {"offset": {"line": 2019, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/AppShell.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ReactNode } from 'react'\r\nimport { BottomNav } from './BottomNav'\r\nimport { AppHeader } from './AppHeader'\r\n\r\nconst NAV_HEIGHT = 88\r\n\r\nexport function AppShell({\r\n  children,\r\n  title,\r\n  showBack = false,\r\n  showLogo = true,\r\n}: {\r\n  children: ReactNode\r\n  title?: string\r\n  showBack?: boolean\r\n  showLogo?: boolean\r\n}) {\r\n  return (\r\n    <div className=\"min-h-screen bg-[var(--tally-bg)]\">\r\n      <div className=\"sticky top-0 z-40\">\r\n        <AppHeader title={title ?? ''} showBack={showBack} showLogo={showLogo} />\r\n      </div>\r\n      <main\r\n        style={{\r\n          paddingBottom: `calc(${NAV_HEIGHT}px + env(safe-area-inset-bottom) + 24px)`,\r\n        }}\r\n      >\r\n        {children}\r\n      </main>\r\n      <BottomNav />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,aAAa;AAEZ,SAAS,SAAS,EACvB,QAAQ,EACR,KAAK,EACL,WAAW,KAAK,EAChB,WAAW,IAAI,EAMhB;IACC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+IAAS;oBAAC,OAAO,SAAS;oBAAI,UAAU;oBAAU,UAAU;;;;;;;;;;;0BAE/D,6LAAC;gBACC,OAAO;oBACL,eAAe,CAAC,KAAK,EAAE,WAAW,wCAAwC,CAAC;gBAC7E;0BAEC;;;;;;0BAEH,6LAAC,+IAAS;;;;;;;;;;;AAGhB;KA1BgB"}},
    {"offset": {"line": 2083, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/HomeHeader.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { format } from 'date-fns'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport function HomeHeader() {\r\n  const { t } = useTranslation()\r\n  const today = new Date()\r\n  const dateStr = format(today, 'EEEE, MMMM d, yyyy')\r\n\r\n  return (\r\n    <div className=\"max-w-[480px] mx-auto px-6 pt-6 pb-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <p className=\"text-sm text-[var(--tally-text-muted)]\">{dateStr}</p>\r\n        <div className=\"w-8 h-8 rounded-full bg-[var(--tally-surface)] border border-[var(--tally-border)] flex items-center justify-center\">\r\n          <span className=\"text-xs font-medium text-[var(--tally-text)]\">MY</span>\r\n        </div>\r\n      </div>\r\n      <h1 className=\"text-2xl font-bold text-[var(--tally-text)] mt-2\">{t('home.todaysSummary')}</h1>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,QAAQ,IAAI;IAClB,MAAM,UAAU,IAAA,mKAAM,EAAC,OAAO;IAE9B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAA0C;;;;;;kCACvD,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAK,WAAU;sCAA+C;;;;;;;;;;;;;;;;;0BAGnE,6LAAC;gBAAG,WAAU;0BAAoD,EAAE;;;;;;;;;;;;AAG1E;GAhBgB;;QACA,qLAAc;;;KADd"}},
    {"offset": {"line": 2166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/components/SummaryCardLovable.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { formatCurrency } from '@/lib/utils'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ninterface SummaryCardLovableProps {\r\n  cashIn: number\r\n  cashOut: number\r\n  balance: number\r\n}\r\n\r\nexport function SummaryCardLovable({ cashIn, cashOut, balance }: SummaryCardLovableProps) {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <div className=\"bg-[var(--tally-surface)] rounded-lg border border-[var(--tally-border)] p-6\">\r\n      <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n        <div>\r\n          <p className=\"text-xs text-[var(--tally-text-muted)] mb-1\">{t('home.cashIn')}</p>\r\n          <p className=\"text-xl font-bold tabular-nums text-[#2E7D5B]\">\r\n            {formatCurrency(cashIn)}\r\n          </p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p className=\"text-xs text-[var(--tally-text-muted)] mb-1\">{t('home.cashOut')}</p>\r\n          <p className=\"text-xl font-bold tabular-nums text-[#B94A3A]\">\r\n            {formatCurrency(cashOut)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"border-t border-[var(--tally-border)] pt-4\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <p className=\"text-sm font-medium text-[var(--tally-text)]\">{t('home.todaysBalance')}</p>\r\n          <p className=\"text-2xl font-bold tabular-nums text-[var(--tally-text)]\">\r\n            {formatCurrency(balance)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAWO,SAAS,mBAAmB,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAA2B;;IACtF,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAA+C,EAAE;;;;;;0CAC9D,6LAAC;gCAAE,WAAU;0CACV,IAAA,wIAAc,EAAC;;;;;;;;;;;;kCAGpB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAA+C,EAAE;;;;;;0CAC9D,6LAAC;gCAAE,WAAU;0CACV,IAAA,wIAAc,EAAC;;;;;;;;;;;;;;;;;;0BAItB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAgD,EAAE;;;;;;sCAC/D,6LAAC;4BAAE,WAAU;sCACV,IAAA,wIAAc,EAAC;;;;;;;;;;;;;;;;;;;;;;;AAM5B;GA5BgB;;QACA,qLAAc;;;KADd"}},
    {"offset": {"line": 2297, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/parvi/tally/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useTodayProfit } from '@/hooks/useTodayProfit'\nimport { useTransactions } from '@/hooks/useTransactions'\nimport { TransactionListLovable } from '@/components/TransactionListLovable'\nimport { AppShell } from '@/components/AppShell'\nimport { HomeHeader } from '@/components/HomeHeader'\nimport { SummaryCardLovable } from '@/components/SummaryCardLovable'\nimport { useTranslation } from 'react-i18next'\nimport Link from 'next/link'\n\nexport default function MainPage() {\n  const { t } = useTranslation()\n  const { data: profitData, isLoading: profitLoading } = useTodayProfit()\n  const { data: transactions, isLoading: transactionsLoading, error: transactionsError } = useTransactions()\n\n  const revenue = profitData?.revenue || 0\n  const expenses = profitData?.expenses || 0\n  const balance = profitData?.profit || 0\n\n  return (\n    <AppShell title=\"\" showBack={false} showLogo={false}>\n      <div className=\"max-w-[480px] mx-auto\">\n        <HomeHeader />\n        \n        <div className=\"px-6 pb-6 space-y-6\">\n          {/* Summary Card */}\n          <SummaryCardLovable \n            cashIn={revenue} \n            cashOut={expenses} \n            balance={balance} \n          />\n\n          {/* Primary Action Buttons */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <Link\n              href=\"/sale\"\n              className=\"h-20 bg-[#29978C] hover:bg-[#238579] text-white text-base font-bold rounded-lg flex items-center justify-center shadow-md transition-colors active:scale-95\"\n            >\n              {t('home.recordSale')}\n            </Link>\n            <Link\n              href=\"/expense\"\n              className=\"h-20 bg-[#EA6C3C] hover:bg-[#E56E44] text-white text-base font-bold rounded-lg flex items-center justify-center shadow-md transition-colors active:scale-95\"\n            >\n              {t('home.recordExpense')}\n            </Link>\n          </div>\n\n          {/* Recent Activity Section */}\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-[var(--tally-text)]\">{t('home.recentActivity')}</h2>\n              <Link \n                href=\"/history\"\n                className=\"text-sm text-[#29978C] font-medium hover:underline\"\n              >\n                {t('home.viewAll')}\n              </Link>\n            </div>\n            {transactionsError ? (\n              <div className=\"text-center py-8 text-[var(--tally-text-muted)]\">\n                <p>{t('home.loadingError')}</p>\n              </div>\n            ) : transactionsLoading ? (\n              <div className=\"text-center py-8 text-[var(--tally-text-muted)]\">{t('common.loading')}</div>\n            ) : (\n              <TransactionListLovable transactions={transactions || []} limit={5} />\n            )}\n          </div>\n        </div>\n      </div>\n    </AppShell>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AATA;;;;;;;;;AAWe,SAAS;;IACtB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,EAAE,MAAM,UAAU,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,mJAAc;IACrE,MAAM,EAAE,MAAM,YAAY,EAAE,WAAW,mBAAmB,EAAE,OAAO,iBAAiB,EAAE,GAAG,IAAA,qJAAe;IAExG,MAAM,UAAU,YAAY,WAAW;IACvC,MAAM,WAAW,YAAY,YAAY;IACzC,MAAM,UAAU,YAAY,UAAU;IAEtC,qBACE,6LAAC,6IAAQ;QAAC,OAAM;QAAG,UAAU;QAAO,UAAU;kBAC5C,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,iJAAU;;;;;8BAEX,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC,iKAAkB;4BACjB,QAAQ;4BACR,SAAS;4BACT,SAAS;;;;;;sCAIX,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CAET,EAAE;;;;;;8CAEL,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CAET,EAAE;;;;;;;;;;;;sCAKP,6LAAC;;8CACC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;sDAAkD,EAAE;;;;;;sDAClE,6LAAC,0KAAI;4CACH,MAAK;4CACL,WAAU;sDAET,EAAE;;;;;;;;;;;;gCAGN,kCACC,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;kDAAG,EAAE;;;;;;;;;;2CAEN,oCACF,6LAAC;oCAAI,WAAU;8CAAmD,EAAE;;;;;yDAEpE,6LAAC,yKAAsB;oCAAC,cAAc,gBAAgB,EAAE;oCAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/E;GA/DwB;;QACR,qLAAc;QAC2B,mJAAc;QACoB,qJAAe;;;KAHlF"}}]
}